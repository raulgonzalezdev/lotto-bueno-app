(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2149:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>et});var a=s(5155),r=s(2115),n=s(8363),o=s(3475),i=s(3659);let l=e=>{let{Icon:t,iconSize:s,title:r,currentPage:n,setPage:o,setCurrentPage:i,APIHost:l,hide:c}=e;return(0,a.jsxs)("button",{disabled:null===l,className:"btn md:btn-sm lg:btn-md ".concat(c?"hidden":"flex"," flex-grow items-center justify-center border-none hover:bg-button-hover-verba ").concat(n===o?"bg-primary-verba text-text-verba":"bg-button-verba text-text-alt-verba"),onClick:e=>{i(o)},children:[(0,a.jsx)(t,{size:s}),(0,a.jsx)("p",{className:"md:text-xs lg:text-sm sm:hidden md:flex",children:r})]},r)},c=e=>{let{imageSrc:t,title:s,subtitle:r,APIHost:c,version:d,currentPage:u,setCurrentPage:h,production:m}=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[(0,a.jsx)("img",{src:t,width:80,className:"flex"}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end justify-center lg:gap-3",children:[(0,a.jsx)("p",{className:"sm:text-2xl md:text-3xl text-text-verba",children:s}),(0,a.jsx)("p",{className:"sm:text-sm text-base text-text-alt-verba font-light",children:r})]})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,a.jsx)("div",{className:"hidden sm:h-[3vh] lg:h-[5vh] bg-text-alt-verba w-px sm:mx-2 md:mx-4"}),(0,a.jsxs)("div",{className:"lg:flex hidden lg:flex-row items-center lg:gap-3 justify-between",children:[(0,a.jsx)("div",{className:" ".concat(m?"h-[0vh]":"sm:h-[3vh] lg:h-[5vh] mx-1"," hidden sm:block bg-text-alt-verba w-px")}),(0,a.jsx)(l,{hide:!1,APIHost:c,Icon:o.b0C,iconSize:18,title:"Electores",currentPage:u,setCurrentPage:h,setPage:"ELECTORES"}),(0,a.jsx)(l,{hide:!1,APIHost:c,Icon:n.Fc2,iconSize:18,title:"Tickets",currentPage:u,setCurrentPage:h,setPage:"TICKETS"}),(0,a.jsx)(l,{hide:!1,APIHost:c,Icon:n.Ic,iconSize:18,title:"Usuarios",currentPage:u,setCurrentPage:h,setPage:"USERS"}),(0,a.jsx)(l,{hide:!1,APIHost:c,Icon:o.CRX,iconSize:18,title:"Recolectores",currentPage:u,setCurrentPage:h,setPage:"RECOLECTORES"}),(0,a.jsx)(l,{hide:!1,APIHost:c,Icon:o.cZE,iconSize:18,title:"Sortear Ganadors",currentPage:u,setCurrentPage:h,setPage:"STATUS"}),(0,a.jsx)("div",{className:" ".concat(m?"h-[0vh]":"sm:h-[3vh] lg:h-[5vh] mx-1"," hidden sm:block bg-text-alt-verba w-px")}),(0,a.jsx)(l,{hide:m,APIHost:c,Icon:o.ZIN,iconSize:18,title:"Lineas Telefonicas",currentPage:u,setCurrentPage:h,setPage:"ADD"}),(0,a.jsx)(l,{hide:m,APIHost:c,Icon:n.yOD,iconSize:18,title:"Configuracion",currentPage:u,setCurrentPage:h,setPage:"SETTINGS"}),(0,a.jsx)("div",{className:"sm:h-[3vh] lg:h-[5vh] mx-1 hidden sm:block bg-text-alt-verba w-px"})]}),(0,a.jsx)("div",{className:"flex flex-row items-center sm:gap-1 lg:gap-5 justify-between",children:(0,a.jsx)("div",{className:"lg:hidden sm:flex md:ml-4 sm:mr-8",children:(0,a.jsx)("ul",{className:"menu md:menu-md sm:menu-sm sm:menu-horizontal bg-base-200 rounded-box bg-bg-alt-verba z-50",children:(0,a.jsx)("li",{children:(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{children:(0,a.jsx)(i.z9i,{size:20})}),(0,a.jsxs)("ul",{className:"bg-bg-alt-verba",children:[(0,a.jsx)("li",{onClick:()=>h("ELECTORES"),children:(0,a.jsx)("a",{children:"Electores"})}),(0,a.jsx)("li",{onClick:()=>h("TICKETS"),children:(0,a.jsx)("a",{children:"Tickets"})}),(0,a.jsx)("li",{onClick:()=>h("USERS"),children:(0,a.jsx)("a",{children:"Usuarios"})}),(0,a.jsx)("li",{onClick:()=>h("RECOLECTORES"),children:(0,a.jsx)("a",{children:"Recolectores"})}),(0,a.jsx)("li",{onClick:()=>h("STATUS"),children:(0,a.jsx)("a",{children:"Sorteos"})}),!m&&(0,a.jsx)("li",{onClick:()=>h("SETTINGS"),children:(0,a.jsx)("a",{children:"Settings"})})]})]})})})})})]})]})};var d=s(1890);let u=async()=>{let e=d.env.HOST||"https://applottobueno.com";return(e.startsWith("https://")?e:"https://".concat(e)).replace(/\/+$/,"")};var h=s(5253),m=s(7485);let x=e=>{let{title:t,TextFieldSetting:s,setting:r,settingsConfig:n,setSettingsConfig:o}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("p",{children:s.description})}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full bg-bg-verba",children:(0,a.jsx)("input",{type:"text",className:"grow",placeholder:t,value:n[r].settings[t].text,onChange:e=>{let s=e.target.value;o(e=>{let a=JSON.parse(JSON.stringify(e));return a[r].settings[t].text=s,a})}})})})]},t)},p=e=>{let{title:t,ImageFieldSetting:s,setting:r,settingsConfig:n,setSettingsConfig:o}=e;return(0,a.jsxs)("div",{className:"flex flex-col justify-center gap-1",children:[(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsx)("p",{children:s.description})}),(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-center items-center mt-4",children:(0,a.jsx)("img",{src:n[r].settings[t].src,alt:"Logo",className:"max-w-xs max-h-32 rounded-xl"})}),(0,a.jsxs)("div",{className:"flex justify-center items-center mt-1",children:[(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=document.getElementById("LogoImageInput"))||void 0===e?void 0:e.click()},className:"btn border-none text-xs bg-bg-verba text-text-alt-verba",children:"A\xf1adir Logotipo"}),(0,a.jsx)("input",{id:"LogoImageInput",type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let s=new FileReader;s.onload=e=>{o(s=>{var a;let n=JSON.parse(JSON.stringify(s));return n[r].settings[t].src=null===(a=e.target)||void 0===a?void 0:a.result,n})},s.readAsDataURL(e.target.files[0])}},className:"hidden"})]})]})})]},t)};var g=s(6670);let b=e=>{let{title:t,ColorSetting:s,setting:r,settingsConfig:n,setSettingsConfig:o}=e,i=e=>{o(s=>{let a=JSON.parse(JSON.stringify(s));return a[r].settings[t].color=e,a})};return(0,a.jsxs)("div",{className:"flex flex-col justify-center gap-1",children:[(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsx)("p",{children:s.description})}),(0,a.jsx)("div",{className:"flex gap-2 justify-center items-center",children:(0,a.jsxs)("div",{className:"flex flex-col gap-1 h-[15vh]",children:[(0,a.jsx)("label",{className:"input bg-bg-verba input-sm input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow",placeholder:t,value:n[r].settings[t].color,onChange:e=>{i(e.target.value)}})}),(0,a.jsx)(g.jI,{color:n[r].settings[t].color,onChange:e=>{i(e)}})]})})]},t)},j=e=>{let{title:t,SelectSetting:s,setting:r,settingsConfig:n,setSettingsConfig:o,setSettingTemplate:i}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("p",{children:s.description})}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("select",{value:n[r].settings[t].value,onChange:e=>{let s=e.target.value;o(e=>{let a={...e};return a[r].settings[t].value=s,a})},className:"select bg-bg-verba",children:s.options.map(e=>(0,a.jsx)("option",{value:e,children:e},"Select_"+e))})})]},t)},f=e=>{let{title:t,CheckboxSetting:s,setting:r,settingsConfig:n,setSettingsConfig:o}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("p",{children:s.description})}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("input",{type:"checkbox",className:"toggle",checked:n[r].settings[t].checked,onChange:e=>{let s=e.target.checked;o(e=>{let a=JSON.parse(JSON.stringify(e));return a[r].settings[t].checked=s,a})}})})]},t)},v=e=>{let{title:t,NumberFieldSetting:s,setting:r,settingsConfig:n,setSettingsConfig:o}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("p",{children:s.description})}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full bg-bg-verba",children:(0,a.jsx)("input",{type:"number",className:"grow",placeholder:t,value:n[r].settings[t].value,onChange:e=>{let s=e.target.value;o(e=>{let a=JSON.parse(JSON.stringify(e));return a[r].settings[t].value=s,a})}})})})]},t)},y=e=>{let{Icon:t,iconSize:s,title:r,currentSetting:n,setSetting:o,setSettingString:i}=e;return(0,a.jsxs)("button",{className:"btn lg:btn-lg flex items-center justify-center border-none hover:bg-button-hover-verba ".concat(n===i?"bg-primary-verba text-text-verba":"bg-button-verba text-text-alt-verba"),onClick:e=>{o(i)},children:[(0,a.jsx)(t,{size:s}),(0,a.jsx)("p",{className:"sm:hidden md:flex md:text-base lg:text-lg",children:r})]},r)};var N=s(1890);let C=e=>{var t;let{settingTemplate:s,setSettingTemplate:o,baseSetting:l,setBaseSetting:c}=e,[d,g]=(0,r.useState)("Customization"),[C,w]=(0,r.useState)(null!==(t=l[s])&&void 0!==t?t:{Customization:{title:"",description:"",settings:{}},Chat:{title:"",description:"",settings:{}}}),[S,E]=(0,r.useState)(null),[k,_]=(0,r.useState)([]);(0,r.useEffect)(()=>{_(Object.keys(l).filter(e=>"currentTemplate"!==e&&!["selectedTheme","themes"].includes(e))),T()},[l]);let T=async()=>{try{let e=await u();E(e)}catch(e){console.error("Error detecting host:",e),E(N.env.HOST||"https://applottobueno.com")}},P=async()=>{let e={...l,[s]:C,currentTemplate:s};c(e),await fetch("".concat(S,"/api/settings"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},R=(e,t)=>{if(""===d)return null;switch(t.type){case"text":return(0,a.jsx)(x,{title:e,setting:d,TextFieldSetting:t,settingsConfig:C,setSettingsConfig:w});case"image":return(0,a.jsx)(p,{title:e,setting:d,ImageFieldSetting:t,settingsConfig:C,setSettingsConfig:w});case"check":return(0,a.jsx)(f,{title:e,setting:d,CheckboxSetting:t,settingsConfig:C,setSettingsConfig:w});case"select":return(0,a.jsx)(j,{title:e,setting:d,SelectSetting:t,settingsConfig:C,setSettingsConfig:w});case"color":return(0,a.jsx)(b,{title:e,setting:d,ColorSetting:t,settingsConfig:C,setSettingsConfig:w});case"number":return(0,a.jsx)(v,{title:e,setting:d,NumberFieldSetting:t,settingsConfig:C,setSettingsConfig:w});default:return null}};return(0,a.jsxs)("div",{className:"flex justify-between items-start gap-5",children:[(0,a.jsxs)("div",{className:"hidden lg:flex lg:flex-col gap-5 lg:w-1/4",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center gap-5",children:[(0,a.jsx)("p",{className:"md:text-base lg:text-lg text-text-alt-verba",children:"Settings"}),(0,a.jsxs)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-5 rounded-lg shadow-lg gap-2",children:[(0,a.jsx)(y,{Icon:h.IFh,iconSize:20,title:"Personaliza App",currentSetting:d,setSetting:g,setSettingString:"Customization"}),(0,a.jsx)(y,{Icon:n.lhM,iconSize:20,title:"Configuraciones de chat",currentSetting:d,setSetting:g,setSettingString:""})]})]}),""!=d&&C&&(0,a.jsxs)("div",{className:"sm:hidden md:flex flex-col justify-center items-center gap-5",children:[(0,a.jsx)("p",{className:"md:text-base lg:text-lg text-text-alt-verba",children:"Description"}),(0,a.jsx)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-5 rounded-lg shadow-lg gap-2",children:(0,a.jsx)("p",{className:"sm:text-xs md:text-sm lg:text-base",children:C[d]?C[d].description:""})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col lg:justify-center justify-start lg:items-center items-start gap-5 w-full lg:w-3/4",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-center w-full",children:[(0,a.jsx)("div",{className:"lg:hidden sm:flex md:ml-4 sm:mr-8",children:(0,a.jsx)("ul",{className:"menu menu-sm sm:menu-horizontal bg-base-200 rounded-box bg-bg-alt-verba z-40",children:(0,a.jsx)("li",{children:(0,a.jsxs)("details",{children:[(0,a.jsxs)("summary",{children:[(0,a.jsx)(i.z9i,{size:15})," Ajustes"]}),(0,a.jsxs)("ul",{className:"bg-bg-alt-verba",children:[(0,a.jsx)("li",{onClick:()=>g("Customization"),children:(0,a.jsx)("a",{children:"Personalizar App"})}),(0,a.jsx)("li",{onClick:()=>g("Chat"),children:(0,a.jsx)("a",{children:"Configuraciones de chat"})})]})]})})})}),(0,a.jsx)("p",{className:"sm:hidden md:flex text-lg text-text-alt-verba",children:"Configuracion"}),(0,a.jsx)("select",{value:s,onChange:e=>{var t;let s=e.target.value;o(s),w(null!==(t=l[s])&&void 0!==t?t:{Customization:{title:"",description:"",settings:{}},Chat:{title:"",description:"",settings:{}}})},className:"select select-md lg:select-sm text-xs bg-bg-alt-verba text-text-verba",children:k.map(e=>(0,a.jsx)("option",{value:e,children:e},"Template"+e))})]}),(0,a.jsxs)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-10 rounded-lg shadow-lg h-[70vh] gap-2 overflow-y-scroll",children:[(0,a.jsx)("p",{className:"font-bold text-2xl lg:mb-5",children:d}),""!=d&&C&&(0,a.jsxs)("div",{className:"lg:hidden flex flex-col items-start gap-5 mb-5",children:[(0,a.jsx)("p",{className:"md:text-base lg:text-lg text-text-alt-verba",children:"Descricion"}),(0,a.jsx)("div",{className:"flex flex-col w-full gap-2",children:(0,a.jsx)("p",{className:"sm:text-xs md:text-sm lg:text-base",children:C[d]?C[d].description:""})})]}),(0,a.jsx)("div",{className:"flex-coll gap-4 grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:d&&C&&Object.entries(C[d].settings).map(e=>{let[t,s]=e;return R(t,s)})}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,a.jsxs)("button",{onClick:P,className:"btn flex items-center justify-center border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba",children:[(0,a.jsx)(h.A7C,{}),(0,a.jsx)("p",{className:"",children:"Aplicar"})]}),(0,a.jsxs)("button",{onClick:()=>{var e;w(null!==(e=l[s])&&void 0!==e?e:{Customization:{title:"",description:"",settings:{}},Chat:{title:"",description:"",settings:{}}})},className:"btn flex items-center justify-center border-none text-text-verba bg-warning-verba hover:bg-button-hover-verba",children:[(0,a.jsx)(m.uDv,{}),(0,a.jsx)("p",{className:"",children:"Reiniciar"})]})]})]})]})]})},w=e=>{let{production:t,settingConfig:s,APIHost:n,RAGConfig:o,isAdmin:i,title:l,subtitle:c,imageSrc:d}=e,[u,h]=(0,r.useState)([]),[m,x]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[b,j]=(0,r.useState)(1),[f]=(0,r.useState)(10),[v,y]=(0,r.useState)(1),[N,C]=(0,r.useState)(""),[w,S]=(0,r.useState)(""),[E,k]=(0,r.useState)([]),[_,T]=(0,r.useState)([]),[P,R]=(0,r.useState)([]),[O,A]=(0,r.useState)([]),[L,z]=(0,r.useState)(""),[I,D]=(0,r.useState)(""),[U,q]=(0,r.useState)(""),[H,M]=(0,r.useState)(""),[F,J]=(0,r.useState)(""),[G,B]=(0,r.useState)(!1),[V,Q]=(0,r.useState)(!1),[W,X]=(0,r.useState)(null),[K,Y]=(0,r.useState)(0),[Z,$]=(0,r.useState)(0),[ee,et]=(0,r.useState)(0);(0,r.useEffect)(()=>{n&&(es(),eo(),ei())},[n]),(0,r.useEffect)(()=>{n&&I&&ea(I)},[n,I]),(0,r.useEffect)(()=>{n&&I&&U&&er(I,U)},[n,I,U]),(0,r.useEffect)(()=>{n&&I&&U&&H&&en(I,U,H)},[n,I,U,H]),(0,r.useEffect)(()=>{n&&(eo(),ei())},[n,I,U,H,F,b]);let es=async()=>{if(n)try{let e=await fetch("".concat(n,"/api/estados"));if(!e.ok)throw Error("Error fetching estados");let t=(await e.json()).sort((e,t)=>e.estado.localeCompare(t.estado,"es",{sensitivity:"base"}));k(t)}catch(e){console.error("Error fetching estados:",e),k([])}},ea=async e=>{if(n)try{let t=await fetch("".concat(n,"/api/municipios/").concat(e));if(!t.ok)throw Error("Error fetching municipios");let s=(await t.json()).sort((e,t)=>e.municipio.localeCompare(t.municipio,"es",{sensitivity:"base"}));T(s)}catch(e){console.error("Error fetching municipios:",e),T([])}},er=async(e,t)=>{if(n)try{let s=await fetch("".concat(n,"/api/parroquias/").concat(e,"/").concat(t));if(!s.ok)throw Error("Error fetching parroquias");let a=(await s.json()).sort((e,t)=>e.parroquia.localeCompare(t.parroquia,"es",{sensitivity:"base"}));R(a)}catch(e){console.error("Error fetching parroquias:",e),R([])}},en=async(e,t,s)=>{if(n)try{let a=await fetch("".concat(n,"/api/centros_votacion/").concat(e,"/").concat(t,"/").concat(s));if(!a.ok)throw Error("Error fetching centros votacion");let r=(await a.json()).sort((e,t)=>e.nombre_cv.localeCompare(t.nombre_cv,"es",{sensitivity:"base"}));A(r)}catch(e){console.error("Error fetching centros votacion:",e),A([])}},eo=async()=>{try{let e=new URLSearchParams({skip:((b-1)*f).toString(),limit:f.toString(),...I&&{codigo_estado:I},...U&&{codigo_municipio:U},...H&&{codigo_parroquia:H},...F&&{codigo_centro_votacion:F}}).toString(),t=await fetch("".concat(n,"/api/electores/?").concat(e)),s=await t.json();h(Array.isArray(s)?s:[])}catch(e){console.error("Error fetching electores:",e),h([])}},ei=async()=>{try{let e=new URLSearchParams({...I&&{codigo_estado:I},...U&&{codigo_municipio:U},...H&&{codigo_parroquia:H},...F&&{codigo_centro_votacion:F}}).toString(),t=await fetch("".concat(n,"/total/electores?").concat(e)),s=await t.json();y(Math.ceil(s/f))}catch(e){console.error("Error fetching total electores:",e),y(1)}},el=async e=>{if(n)try{let t=await fetch("".concat(n,"/api/electores/cedula/").concat(e)),s=await t.json();g(s)}catch(e){console.error("Error fetching elector detail:",e)}},ec=async()=>{if(w)try{let e=await fetch("".concat(n,"/api/electores/cedula/").concat(w));if(404===e.status){z("C\xe9dula no encontrada"),g(null),x(!1);return}let t=await e.json();g(t),z(""),x(!0)}catch(e){console.error("Error searching by cedula:",e),z("Error al buscar la c\xe9dula")}},ed=e=>{el(e),x(!0)},eu=()=>{x(!1),g(null),z("")},eh=e=>{e<1?j(1):e>v?j(v):j(e),eo()},em=(e,t)=>{X({type:e,format:t}),Q(!0)},ex=async()=>{if(W){Q(!1),B(!0),Y(0),et(0);try{let s=new URLSearchParams;I&&s.append("codigo_estado",I),U&&""!==U&&s.append("codigo_municipio",U),H&&""!==H&&s.append("codigo_parroquia",H),F&&""!==F&&s.append("codigo_centro_votacion",F);let a=await fetch("".concat(n,"/download/excel/api/electores/info?").concat(s)),r=await a.json();$(r.num_batches);for(let a=1;a<=r.num_batches;a++){var e,t;et(a),Y((a-1)/r.num_batches*100);let o="".concat(n,"/download/excel/api/electores/batch/").concat(a,"?").concat(s),i=await fetch(o);if(!i.ok)throw Error("Error al descargar el lote ".concat(a,": ").concat(i.statusText));let l=await i.blob(),c=(null===(t=i.headers.get("Content-Disposition"))||void 0===t?void 0:null===(e=t.split("filename=")[1])||void 0===e?void 0:e.replace(/["']/g,""))||"electores_parte_".concat(a,".xlsx.zip"),d=window.URL.createObjectURL(l),u=document.createElement("a");u.href=d,u.download=c,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(d),await new Promise(e=>setTimeout(e,1e3))}Y(100)}catch(e){console.error("Error en la descarga:",e),alert("Hubo un error al descargar los archivos. Por favor, int\xe9ntelo de nuevo.")}finally{B(!1),et(0),Y(0)}}},ep=async()=>{if(!I){alert("Por favor, seleccione un estado primero");return}try{var e,t;B(!0);let s=await fetch("".concat(n,"/download/excel/centros-por-estado/").concat(I));if(!s.ok)throw Error("Error al descargar los centros: ".concat(s.statusText));let a=await s.blob(),r=(null===(t=s.headers.get("Content-Disposition"))||void 0===t?void 0:null===(e=t.split("filename=")[1])||void 0===e?void 0:e.replace(/["']/g,""))||"centros_electorales.xlsx.zip",o=window.URL.createObjectURL(a),i=document.createElement("a");i.href=o,i.download=r,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)}catch(e){console.error("Error en la descarga:",e),alert("Hubo un error al descargar el archivo. Por favor, int\xe9ntelo de nuevo.")}finally{B(!1)}},eg=async()=>{if(!I){alert("Por favor, seleccione un estado primero");return}try{B(!0),Y(0);let s=await fetch("".concat(n,"/download/excel/api/electores-por-centros/info/").concat(I));if(!s.ok)throw Error("Error al obtener informaci\xf3n de la descarga: ".concat(s.statusText));let a=await s.json();if(!a.centros||!Array.isArray(a.centros))throw Error("Formato de respuesta inv\xe1lido: no se encontraron centros");let r=0,o=a.centros.length;for(let s of a.centros)try{var e,t;let a=await fetch("".concat(n,"/download/excel/api/electores-por-centros/").concat(I,"/").concat(s.codigo));if(!a.ok){console.error("Error al descargar centro ".concat(s.codigo,": ").concat(a.statusText));continue}let i=await a.blob(),l=(null===(t=a.headers.get("Content-Disposition"))||void 0===t?void 0:null===(e=t.split("filename=")[1])||void 0===e?void 0:e.replace(/["']/g,""))||"centro_".concat(s.codigo,".xlsx.zip"),c=window.URL.createObjectURL(i),d=document.createElement("a");d.href=c,d.download=l,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c);let u=++r/o*100;Y(u),await new Promise(e=>setTimeout(e,1e3))}catch(e){console.error("Error descargando centro ".concat(s.codigo,":"),e)}Y(100)}catch(e){console.error("Error en la descarga:",e),alert("Hubo un error al descargar los archivos. Por favor, int\xe9ntelo de nuevo.")}finally{B(!1)}};return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{children:"Control de Electores"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Estado:"}),(0,a.jsxs)("select",{onChange:e=>{let t=e.target.value;D("Seleccione un estado"===t?"":t),q(""),M(""),J(""),T([]),R([]),A([])},className:"input input-bordered w-full",value:I||"",children:[(0,a.jsx)("option",{value:"",children:"Seleccione un estado"}),E.map(e=>(0,a.jsx)("option",{value:e.codigo_estado,children:e.estado},e.codigo_estado))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Municipio:"}),(0,a.jsxs)("select",{onChange:e=>{q(e.target.value),M(""),J(""),R([]),A([])},className:"input input-bordered w-full",value:U,disabled:!I,children:[(0,a.jsx)("option",{value:"",children:"Seleccione un municipio"}),_.map(e=>(0,a.jsx)("option",{value:e.codigo_municipio,children:e.municipio},e.codigo_municipio))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Parroquia:"}),(0,a.jsxs)("select",{onChange:e=>{M(e.target.value),J(""),A([])},className:"input input-bordered w-full",value:H,disabled:!U,children:[(0,a.jsx)("option",{value:"",children:"Seleccione una parroquia"}),P.map(e=>(0,a.jsx)("option",{value:e.codigo_parroquia,children:e.parroquia},e.codigo_parroquia))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Centro de Votaci\xf3n:"}),(0,a.jsxs)("select",{onChange:e=>{J(e.target.value)},className:"input input-bordered w-full",value:F,disabled:!H,children:[(0,a.jsx)("option",{value:"",children:"Seleccione un centro de votaci\xf3n"}),O.map(e=>(0,a.jsx)("option",{value:e.codificacion_nueva_cv,children:e.nombre_cv},e.codificacion_nueva_cv))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"B\xfasqueda por c\xe9dula:"}),(0,a.jsx)("input",{type:"text",value:w,onChange:e=>{S(e.target.value)},className:"input input-bordered w-full"}),(0,a.jsx)("button",{onClick:ec,className:"btn btn-primary w-full mt-2",children:"Buscar"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"B\xfasqueda general:"}),(0,a.jsx)("input",{type:"text",value:N,onChange:e=>{C(e.target.value)},className:"input input-bordered w-full"})]})]}),(0,a.jsxs)("div",{className:"mb-4 flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>em("electores","excel"),className:"btn btn-secondary",disabled:G,children:G?"Descargando...":"Descargar Electores Excel"}),(0,a.jsx)("button",{onClick:ep,className:"btn btn-primary",disabled:!I||G,children:G?"Descargando...":"Descargar Centros del Estado"}),(0,a.jsx)("button",{onClick:eg,disabled:!I||G,className:"flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(!I||G?"opacity-50 cursor-not-allowed":""),children:G?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"mr-2",children:["Descargando... ",K.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})]}):"Descargar Electores por Centros"})]}),(0,a.jsxs)("div",{className:"pagination mb-4 flex justify-center",children:[(0,a.jsx)("button",{onClick:()=>eh(1),className:"btn btn-primary mr-1",children:"<<"}),(0,a.jsx)("button",{onClick:()=>eh(b-1),className:"btn btn-primary mr-1",children:"<"}),(0,a.jsxs)("span",{className:"btn btn-disabled mr-1",children:["P\xe1gina ",b," de ",v]}),(0,a.jsx)("button",{onClick:()=>eh(b+1),className:"btn btn-primary mr-1",children:">"}),(0,a.jsx)("button",{onClick:()=>eh(v),className:"btn btn-primary",children:">>"})]}),(0,a.jsxs)("table",{className:"table-auto w-full mb-4",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"C\xe9dula"}),(0,a.jsx)("th",{children:"Nombre"}),(0,a.jsx)("th",{children:"Apellido"}),(0,a.jsx)("th",{children:"Centro de Votaci\xf3n"}),(0,a.jsx)("th",{children:"Acciones"})]})}),(0,a.jsx)("tbody",{children:u.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:"".concat(null==e?void 0:e.letra_cedula,"-").concat(null==e?void 0:e.numero_cedula)}),(0,a.jsx)("td",{children:null==e?void 0:e.p_nombre}),(0,a.jsx)("td",{children:null==e?void 0:e.p_apellido}),(0,a.jsx)("td",{children:null==e?void 0:e.codigo_centro_votacion}),(0,a.jsx)("td",{children:(0,a.jsx)("button",{className:"btn btn-primary",onClick:()=>ed(null==e?void 0:e.numero_cedula),children:"Ver Detalle"})})]},null==e?void 0:e.id))})]}),m&&(0,a.jsx)("div",{className:"modal-overlay",onClick:eu,children:(0,a.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:"modal-close-button",onClick:eu,children:"\xd7"}),(0,a.jsx)("h2",{children:"Detalle del Elector"}),p&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"ID:"})," ",p.elector.id]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"C\xe9dula:"})," ","".concat(p.elector.letra_cedula,"-").concat(p.elector.numero_cedula)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Nombre:"})," ","".concat(p.elector.p_nombre," ").concat(p.elector.s_nombre)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Apellido:"})," ","".concat(p.elector.p_apellido," ").concat(p.elector.s_apellido)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Sexo:"})," ",p.elector.sexo]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Fecha Nacimiento:"})," ",new Date(p.elector.fecha_nacimiento).toLocaleDateString()]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Estado:"})," ",p.geografico.estado]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Municipio:"})," ",p.geografico.municipio]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Parroquia:"})," ",p.geografico.parroquia]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Centro de Votaci\xf3n:"})," ",p.centro_votacion.nombre_cv]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Direcci\xf3n Centro de Votaci\xf3n:"})," ",p.centro_votacion.direccion_cv]})]})]})}),V&&(0,a.jsx)("div",{className:"modal-overlay",onClick:()=>Q(!1),children:(0,a.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Informaci\xf3n de Descarga"}),(0,a.jsx)("p",{className:"mb-4",children:"Los archivos se descargar\xe1n en partes para mayor eficiencia. Cada parte se descargar\xe1 autom\xe1ticamente tan pronto como est\xe9 lista. Puede continuar trabajando mientras se completan las descargas."}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{className:"btn btn-secondary",onClick:()=>Q(!1),children:"Cancelar"}),(0,a.jsx)("button",{className:"btn btn-primary",onClick:ex,children:"Comenzar descargas"})]})]})}),G&&(0,a.jsxs)("div",{className:"fixed bottom-4 right-4 bg-white p-4 rounded-lg shadow-lg",children:[(0,a.jsx)("h4",{className:"font-bold mb-2",children:"Descargando archivos"}),(0,a.jsxs)("div",{className:"mb-2",children:["Parte actual: ",ee," de ",Z]}),(0,a.jsx)("div",{className:"w-64 h-2 bg-gray-200 rounded-full",children:(0,a.jsx)("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300",style:{width:"".concat(K,"%")}})}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[Math.round(K),"% completado"]})]})]})},S=e=>{let{title:t,subtitle:s,imageSrc:r,setCurrentPage:n}=e;return(0,a.jsxs)("div",{className:"welcome-page",children:[(0,a.jsx)("div",{className:"logo-container",children:(0,a.jsx)("img",{src:r,width:381,height:162,className:"footer-logo",alt:"Logo"})}),(0,a.jsx)("h1",{className:"title",children:t}),(0,a.jsx)("h2",{className:"subtitle",children:s}),(0,a.jsx)("button",{onClick:()=>n("REGISTER"),className:"register-button",children:"Reg\xedstrate aqu\xed"}),(0,a.jsxs)("div",{className:"social-icons",children:[(0,a.jsx)("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(h.iYk,{size:32})}),(0,a.jsx)("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(h.ao$,{size:32})}),(0,a.jsx)("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(h.feZ,{size:32})})]}),(0,a.jsxs)("footer",{className:"footer",children:[(0,a.jsx)("p",{children:"Ganar premios nunca hab\xeda sido tan sencillo"}),(0,a.jsx)("img",{src:r,width:180,height:69,alt:"Logo",className:"footer-logo"})]})]})},E=e=>{let t,{message:s,type:n,onClose:o}=e;switch(n){case"success":t="bg-green-500";break;case"error":t="bg-red-500";break;case"info":t="bg-blue-500"}return(0,r.useEffect)(()=>{let e=setTimeout(o,5e3);return()=>clearTimeout(e)},[o]),(0,a.jsx)("div",{className:"".concat(t," text-white p-4 rounded fixed bottom-4 right-4 z-50"),children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:s}),(0,a.jsx)("button",{onClick:o,className:"ml-4",children:"\xd7"})]})})};var k=s(1890);let _=e=>{let{isVisible:t,onClose:s,onAdminLogin:n,setCurrentPage:o,title:i,subtitle:l,imageSrc:c}=e,[d,h]=(0,r.useState)(!0),[m,x]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[b,j]=(0,r.useState)(""),[f,v]=(0,r.useState)(null),[y,N]=(0,r.useState)("info"),[C,w]=(0,r.useState)(null);(0,r.useEffect)(()=>{S()},[]);let S=async()=>{try{let e=await u();w(e)}catch(e){console.error("Error detecting host:",e),w(k.env.HOST||"https://applottobueno.com")}},_=async()=>{try{let e=await fetch("".concat(C,"/api/login"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:m,password:p})}),t=await e.json();e.ok&&t.isAdmin?(n(!0),o("ELECTORES"),v("Inicio de sesi\xf3n exitoso"),N("success"),s()):(v("Inicio de sesi\xf3n fallido: "+(t.detail||"No autorizado")),N("error"),n(!1))}catch(e){console.error("Error al iniciar sesi\xf3n:",e),v("Error al iniciar sesi\xf3n. Por favor, int\xe9ntelo de nuevo."),N("error")}x(""),g("")},T=async()=>{try{let e=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m,email:b,password:p,isAdmin:!1})}),t=await e.json();e.ok?(v("Registro exitoso. Ahora puedes iniciar sesi\xf3n."),N("success"),h(!0)):(v("Registro fallido: "+t.detail),N("error"))}catch(e){console.error("Error al registrarse:",e),v("Error al registrarse. Por favor, int\xe9ntelo de nuevo."),N("error")}x(""),j(""),g("")};return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center gap-5 mb-4",children:[(0,a.jsx)("img",{src:c,width:381,height:162,className:"flex"}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end justify-center lg:gap-3",children:[(0,a.jsx)("p",{className:"sm:text-2xl md:text-3xl text-text-verba",children:i}),(0,a.jsx)("p",{className:"sm:text-sm text-base text-text-alt-verba font-light",children:l})]})]}),(0,a.jsx)("h2",{className:"text-lg font-bold mb-4",children:d?"Inicio de Sesi\xf3n Admin":"Registro"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:"Nombre de usuario",className:"input input-bordered w-full mb-2"}),(0,a.jsx)("input",{type:"password",value:p,onChange:e=>g(e.target.value),placeholder:"Contrase\xf1a",className:"input input-bordered w-full mb-2"}),!d&&(0,a.jsx)("input",{type:"email",value:b,onChange:e=>j(e.target.value),placeholder:"Correo electr\xf3nico",className:"input input-bordered w-full mb-2"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("button",{onClick:d?_:T,className:"btn btn-primary",children:d?"Iniciar Sesi\xf3n":"Registrarse"}),(0,a.jsx)("button",{onClick:s,className:"btn",children:"Cancelar"})]}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)("button",{onClick:()=>h(!d),className:"text-blue-500 hover:underline",children:d?"\xbfNo tienes una cuenta? Reg\xedstrate":"\xbfYa tienes una cuenta? Inicia sesi\xf3n"})}),f&&(0,a.jsx)(E,{message:f,type:y,onClose:()=>v(null)})]})}):null},T=e=>{let{message:t,onConfirm:s,onCancel:r}=e;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Confirmaci\xf3n"}),(0,a.jsx)("p",{className:"mb-4",children:t}),(0,a.jsxs)("div",{className:"flex justify-end",children:[(0,a.jsx)("button",{onClick:r,className:"btn mr-2",children:"Cancelar"}),(0,a.jsx)("button",{onClick:s,className:"btn btn-primary",children:"Confirmar"})]})]})})};var P=s(1890);let R=e=>{let{title:t,subtitle:s,imageSrc:n,setCurrentPage:o,onAdminLogin:i}=e,[l,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null),[p,g]=(0,r.useState)([]),[b,j]=(0,r.useState)({cedula:"",operador:"0414",telefono:"",referido_id:1}),[f,v]=(0,r.useState)(null),[y,N]=(0,r.useState)("info"),[C,w]=(0,r.useState)(""),[S,k]=(0,r.useState)(!1),[R,O]=(0,r.useState)(!1),[A,L]=(0,r.useState)(""),[z,I]=(0,r.useState)(""),[D,U]=(0,r.useState)("https://applottobueno.com"),q=P.env.COMPANY_PHONE_CONTACT||"584262831867";(0,r.useEffect)(()=>{M()},[]),(0,r.useEffect)(()=>{D&&H()},[D]);let H=async()=>{try{let e=null==D?void 0:D.replace("http://","https://");if(!e)throw Error("No se ha configurado la URL base");let t=await fetch("".concat(e,"/api/recolectores")),s=await t.json();g(s.items)}catch(e){console.error("Error fetching referidos:",e)}},M=async()=>{try{let e=await u(),t=null==e?void 0:e.replace("http://","https://");U(t||"https://applottobueno.com")}catch(e){console.error("Error detecting host:",e),U("https://applottobueno.com")}},F=e=>{let{name:t,value:s}=e.target;j(e=>({...e,[t]:s}))},J=e=>{x(e),h(!0)},G=()=>{h(!1),x(null),window.location.href="https://wa.me/".concat(q,"?text=/start%0A").concat(b.cedula,". Hola, soy ").concat(A," con c\xe9dula ").concat(b.cedula,". Este es mi numero telefonico n\xfamero ").concat(z," para Lotto Bueno.")},B=async e=>{e.preventDefault(),k(!0),v(null);let t="58".concat(b.operador.slice(1)).concat(b.telefono);if(I(t),!/^58\d{10}$/.test(t)){v("El n\xfamero de tel\xe9fono debe tener 10 d\xedgitos despu\xe9s del operador."),N("error"),k(!1);return}try{let e=null==D?void 0:D.replace("http://","https://");if(!e)throw Error("No se ha configurado la URL base");let s=await fetch("".concat(e,"/generate_tickets"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cedula:b.cedula,telefono:t,referido_id:b.referido_id||1})}),a=await s.json();200===s.status?"success"===a.status?(L(a.message),a.qr_code&&J(a.qr_code),v(a.message),N("success")):(a.message.includes("404 Client Error: Not Found")?v("La c\xe9dula no es v\xe1lida y debe estar inscrita en el registro electoral."):v(a.message||"Error generando el ticket. Por favor, intenta de nuevo."),N("info")):(v("Error generando el ticket. Por favor, intenta de nuevo."),N("error"))}catch(e){console.error("Error generating ticket:",e),v("Error generando el ticket. Por favor, intenta de nuevo."),N("error")}k(!1)},V=p.filter(e=>"".concat(e.cedula," ").concat(e.nombre).toLowerCase().includes(C.toLowerCase()));return(0,a.jsx)("div",{className:"welcome-page",children:(0,a.jsxs)("div",{className:"register-page p-4 flex flex-col items-center",children:[(0,a.jsx)("img",{src:n,width:381,height:162,className:"footer-logo",alt:"Logo"}),(0,a.jsx)("h1",{className:"text-4xl font-bold mb-2 text-center text-white",children:t}),(0,a.jsx)("h2",{className:"text-xl mb-6 text-center text-white",children:s}),(0,a.jsxs)("form",{className:"space-y-4 w-full max-w-md",onSubmit:B,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 text-white",children:"Promotor"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar promotor...",className:"inputField mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:C,onChange:e=>w(e.target.value)}),(0,a.jsxs)("select",{name:"referido_id",className:"inputField mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:F,value:b.referido_id,children:[(0,a.jsx)("option",{value:"1",children:"ninguno"}),V.map(e=>(0,a.jsx)("option",{value:e.id,children:"".concat(e.cedula," - ").concat(e.nombre)},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 text-white",children:"C\xe9dula"}),(0,a.jsx)("input",{type:"text",name:"cedula",className:"inputField mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:b.cedula,onChange:F})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"ml-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 text-white",children:"Operador"}),(0,a.jsxs)("select",{name:"operador",className:"inputField mt-1 block px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:F,value:b.operador,children:[(0,a.jsx)("option",{value:"0414",children:"0414"}),(0,a.jsx)("option",{value:"0424",children:"0424"}),(0,a.jsx)("option",{value:"0416",children:"0416"}),(0,a.jsx)("option",{value:"0426",children:"0426"}),(0,a.jsx)("option",{value:"0412",children:"0412"})]})]}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 text-white",children:"Tel\xe9fono"}),(0,a.jsx)("input",{type:"text",name:"telefono",placeholder:"Ingrese el n\xfamero de tel\xe9fono",className:"inputField mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:b.telefono,onChange:F})]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700",disabled:S,children:S?(0,a.jsx)("span",{className:"spinner"}):"Registrar"})})]}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)("button",{onClick:()=>{c(!0)},className:"text-blue-500 hover:underline",children:"Ir al Dashboard"})}),(0,a.jsx)(_,{isVisible:l,onClose:()=>{c(!1)},onAdminLogin:i,setCurrentPage:o,title:t,subtitle:s,imageSrc:n}),d&&m&&(0,a.jsx)("div",{className:"modal-overlay",onClick:G,children:(0,a.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:"modal-close-button",onClick:G,children:"\xd7"}),(0,a.jsx)("h2",{children:"Ticket Generado"}),(0,a.jsx)("img",{src:"data:image/png;base64,".concat(m),alt:"QR Code"}),(0,a.jsx)("p",{children:"El ticket ha sido generado exitosamente."}),(0,a.jsx)("a",{href:"https://wa.me/".concat(q,"?text=/start%0A").concat(b.cedula,". Hola, soy ").concat(A," con c\xe9dula ").concat(b.cedula,". Este es mi numero telefonico n\xfamero ").concat(z," para Lotto Bueno."),target:"_blank",rel:"noopener noreferrer",className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-700 mt-4 inline-block",children:"Enviar mensaje por WhatsApp"})]})}),f&&(0,a.jsx)(E,{message:f,type:y,onClose:()=>v(null)}),R&&(0,a.jsx)(T,{message:"\xbfQuieres registrar otro ticket?",onConfirm:()=>{j({cedula:"",operador:"0414",telefono:"",referido_id:1}),O(!1)},onCancel:()=>{O(!1)}})]})})};var O=s(1890);let A=()=>{let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!1),[o,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[d,h]=(0,r.useState)(1),[m]=(0,r.useState)(10),[x,p]=(0,r.useState)(1),[g,b]=(0,r.useState)(""),[j,f]=(0,r.useState)({username:"",email:"",password:"",isAdmin:!1}),[v,y]=(0,r.useState)(null),[N,C]=(0,r.useState)("info"),[w,S]=(0,r.useState)(null);(0,r.useEffect)(()=>{k()},[]),(0,r.useEffect)(()=>{_()},[w,d,g]);let k=async()=>{try{let e=await u();S(e)}catch(e){console.error("Error detecting host:",e),S(O.env.HOST||"https://applottobueno.com")}},_=async()=>{if(!w)return;let e=new URLSearchParams({skip:((d-1)*m).toString(),limit:m.toString(),...g&&{search:g}}).toString();try{let s=await fetch("".concat(w,"/api/users?").concat(e)),a=await s.json();t(a),p(Math.ceil(a.length/m))}catch(e){console.error("Error fetching users:",e),t([]),p(1)}},T=async e=>{if(w)try{await fetch("".concat(w,"/api/users/").concat(e),{method:"DELETE"}),_(),y("Usuario eliminado exitosamente"),C("success")}catch(e){console.error("Error eliminando usuario:",e),y("Error eliminando usuario. Por favor, intenta de nuevo."),C("error")}},P=async()=>{if(w)try{await fetch("".concat(w,"/api/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}),f({username:"",email:"",password:"",isAdmin:!1}),_(),L(),y("Usuario creado exitosamente"),C("success")}catch(e){console.error("Error creando usuario:",e),y("Error creando usuario. Por favor, intenta de nuevo."),C("error")}},R=async e=>{if(w)try{await fetch("".concat(w,"/api/users/").concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),_(),L(),y("Usuario actualizado exitosamente"),C("success")}catch(e){console.error("Error actualizando usuario:",e),y("Error actualizando usuario. Por favor, intenta de nuevo."),C("error")}},A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;c(e),i(!!e),n(!0)},L=()=>{n(!1),c(null)},z=e=>{e<1?h(1):e>x?h(x):h(e),_()};return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{children:"Control de Usuarios"}),(0,a.jsx)("button",{onClick:()=>A(),className:"btn btn-primary mb-4",children:"Create New User"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar...",value:g,onChange:e=>{b(e.target.value)},className:"input input-bordered mb-4"}),(0,a.jsxs)("div",{className:"pagination mb-4 flex justify-center",children:[(0,a.jsx)("button",{onClick:()=>z(1),className:"btn btn-primary mr-1",children:"<<"}),(0,a.jsx)("button",{onClick:()=>z(d-1),className:"btn btn-primary mr-1",children:"<"}),(0,a.jsxs)("span",{className:"btn btn-disabled mr-1",children:["P\xe1gina ",d," de ",x]}),(0,a.jsx)("button",{onClick:()=>z(d+1),className:"btn btn-primary mr-1",children:">"}),(0,a.jsx)("button",{onClick:()=>z(x),className:"btn btn-primary",children:">>"})]}),(0,a.jsxs)("table",{className:"table-auto w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID"}),(0,a.jsx)("th",{children:"Username"}),(0,a.jsx)("th",{children:"Email"}),(0,a.jsx)("th",{children:"Created_at"}),(0,a.jsx)("th",{children:"Updated_at"}),(0,a.jsx)("th",{children:"isAdmin"}),(0,a.jsx)("th",{children:"Acciones"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.id}),(0,a.jsx)("td",{children:e.username}),(0,a.jsx)("td",{children:e.email}),(0,a.jsx)("td",{children:e.created_at}),(0,a.jsx)("td",{children:e.updated_at}),(0,a.jsx)("td",{children:e.isAdmin?"Yes":"No"}),(0,a.jsxs)("td",{children:[(0,a.jsx)("button",{className:"btn btn-primary mr-2",onClick:()=>A(e),children:"Edit"}),(0,a.jsx)("button",{className:"btn btn-danger",onClick:()=>T(e.id),children:"Eliminar"})]})]},e.id))})]}),s&&(0,a.jsx)("div",{className:"modal-overlay",onClick:L,children:(0,a.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:"modal-close-button",onClick:L,children:"\xd7"}),(0,a.jsx)("h2",{children:o?"Edit User":"Create User"}),(0,a.jsx)("input",{type:"text",placeholder:"Username",value:o&&l?l.username:j.username,onChange:e=>{o&&l?c({...l,username:e.target.value}):f({...j,username:e.target.value})},className:"input input-bordered w-full mb-2"}),(0,a.jsx)("input",{type:"email",placeholder:"Email",value:o&&l?l.email:j.email,onChange:e=>{o&&l?c({...l,email:e.target.value}):f({...j,email:e.target.value})},className:"input input-bordered w-full mb-2"}),(0,a.jsx)("input",{type:"password",placeholder:"Password",value:j.password,onChange:e=>f({...j,password:e.target.value}),className:"input input-bordered w-full mb-2"}),(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:o&&l?l.isAdmin:j.isAdmin,onChange:e=>{o&&l?c({...l,isAdmin:e.target.checked}):f({...j,isAdmin:e.target.checked})}}),"Es Admin"]}),(0,a.jsx)("button",{onClick:o?()=>R(l):P,className:"btn btn-primary",children:o?"Update User":"Create User"})]})}),v&&(0,a.jsx)(E,{message:v,type:N,onClose:()=>y(null)})]})};var L=s(1890);let z=()=>{let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!1),[o,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[d,h]=(0,r.useState)(1),[m]=(0,r.useState)(10),[x,p]=(0,r.useState)(1),[g,b]=(0,r.useState)(""),[j,f]=(0,r.useState)("https://applottobueno.com"),[v,y]=(0,r.useState)({validado:!1,ganador:!1}),[N,C]=(0,r.useState)([]),[w,S]=(0,r.useState)([]),[E,k]=(0,r.useState)(""),[_,T]=(0,r.useState)("");(0,r.useEffect)(()=>{P()},[]),(0,r.useEffect)(()=>{j&&(A(),R(),O())},[j,d,g,E,_]);let P=async()=>{try{let e=await u();f(e)}catch(e){console.error("Error detecting host:",e),f(L.env.HOST||"https://applottobueno.com")}},R=async()=>{if(j)try{let e=j.replace("http://","https://"),t=await fetch("".concat(e,"/api/estados"));if(!t.ok)throw Error("Error fetching estados");let s=await t.json();C(s)}catch(e){console.error("Error fetching estados:",e)}},O=async()=>{if(j)try{let e=j.replace("http://","https://"),t=await fetch("".concat(e,"/api/recolectores"));if(!t.ok)throw Error("Error fetching recolectores");let s=await t.json();S(s.items||s)}catch(e){console.error("Error fetching recolectores:",e)}},A=async()=>{let e=new URLSearchParams({skip:((d-1)*m).toString(),limit:m.toString(),...g&&{search:g},...E&&{codigo_estado:E},..._&&{referido_id:_}}).toString();try{let s=null==j?void 0:j.replace("http://","https://");if(!s)throw Error("No se ha configurado la URL base");let a=await fetch("".concat(s,"/api/tickets/?").concat(e));if(!a.ok)throw Error("Error: ".concat(a.statusText));let r=await a.json();Array.isArray(r.items)?(t(r.items),p(Math.ceil(r.total/m))):(t(r),p(Math.ceil(r.length/m)))}catch(e){console.error("Error fetching tickets:",e),t([]),p(1)}},z=e=>{c(e),n(!0)},I=e=>{c(e),y({validado:e.validado,ganador:e.ganador}),i(!0)},D=()=>{n(!1),c(null)},U=()=>{i(!1),c(null)},q=e=>{e<1?h(1):e>x?h(x):h(e),A()},H=e=>{let{name:t,checked:s}=e.target;y(e=>({...e,[t]:s}))},M=async e=>{if(e.preventDefault(),j&&l)try{(await fetch("/tickets/".concat(l.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})).ok?(A(),U()):console.error("Error updating ticket")}catch(e){console.error("Error updating ticket:",e)}},F=async(e,t)=>{let s=new URLSearchParams({...g&&{search:g},...E&&{codigo_estado:E},..._&&{referido_id:_}}).toString(),a="";"tickets"===e&&(a="excel"===t?"/api/download/excel/tickets?".concat(s):"/api/download/txt/tickets?".concat(s));let r=1;for(;;){let s=document.createElement("a");if(s.href="".concat(a,"&part=").concat(r),s.download="".concat(e,"_part").concat(r,".").concat(t),document.body.appendChild(s),s.click(),document.body.removeChild(s),!(await fetch("".concat(a,"&part=").concat(r),{method:"HEAD"})).ok)break;r++}};return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{children:"Control de Tickets"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Buscar...",value:g,onChange:e=>{b(e.target.value),h(1)},className:"input input-bordered"}),(0,a.jsxs)("select",{value:E,onChange:e=>k(e.target.value),className:"select select-bordered",children:[(0,a.jsx)("option",{value:"",children:"Todos los estados"}),N.map(e=>(0,a.jsx)("option",{value:e.codigo_estado,children:e.estado},e.codigo_estado))]}),(0,a.jsxs)("select",{value:_,onChange:e=>T(e.target.value),className:"select select-bordered",children:[(0,a.jsx)("option",{value:"",children:"Todos los recolectores"}),w.map(e=>(0,a.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("button",{onClick:()=>F("tickets","excel"),className:"btn btn-secondary mr-2",children:"Descargar Tickets Excel"}),(0,a.jsx)("button",{onClick:()=>F("tickets","txt"),className:"btn btn-secondary",children:"Descargar Tickets TXT"})]}),(0,a.jsxs)("div",{className:"pagination mb-4 flex justify-center",children:[(0,a.jsx)("button",{onClick:()=>q(1),className:"btn btn-primary mr-1",children:"<<"}),(0,a.jsx)("button",{onClick:()=>q(d-1),className:"btn btn-primary mr-1",children:"<"}),(0,a.jsxs)("span",{className:"btn btn-disabled mr-1",children:["P\xe1gina ",d," de ",x]}),(0,a.jsx)("button",{onClick:()=>q(d+1),className:"btn btn-primary mr-1",children:">"}),(0,a.jsx)("button",{onClick:()=>q(x),className:"btn btn-primary",children:">>"})]}),(0,a.jsxs)("table",{className:"table-auto w-full mb-4",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID"}),(0,a.jsx)("th",{children:"N\xfamero Ticket"}),(0,a.jsx)("th",{children:"C\xe9dula"}),(0,a.jsx)("th",{children:"Nombre"}),(0,a.jsx)("th",{children:"Tel\xe9fono"}),(0,a.jsx)("th",{children:"Estado"}),(0,a.jsx)("th",{children:"Municipio"}),(0,a.jsx)("th",{children:"Parroquia"}),(0,a.jsx)("th",{children:"Referido ID"}),(0,a.jsx)("th",{children:"Validado"}),(0,a.jsx)("th",{children:"Ganador"}),(0,a.jsx)("th",{children:"Creado en"}),(0,a.jsx)("th",{children:"Acciones"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.id}),(0,a.jsx)("td",{children:e.numero_ticket}),(0,a.jsx)("td",{children:e.cedula}),(0,a.jsx)("td",{children:e.nombre}),(0,a.jsx)("td",{children:e.telefono}),(0,a.jsx)("td",{children:e.estado}),(0,a.jsx)("td",{children:e.municipio}),(0,a.jsx)("td",{children:e.parroquia}),(0,a.jsx)("td",{children:e.referido_id}),(0,a.jsx)("td",{children:e.validado?"S\xed":"No"}),(0,a.jsx)("td",{children:e.ganador?"S\xed":"No"}),(0,a.jsx)("td",{children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsxs)("td",{children:[(0,a.jsx)("button",{className:"btn btn-primary mr-2",onClick:()=>z(e),children:"Ver Detalles"}),(0,a.jsx)("button",{className:"btn btn-secondary",onClick:()=>I(e),children:"Editar"})]})]},e.id))})]}),s&&l&&(0,a.jsx)("div",{className:"modal-overlay",onClick:D,children:(0,a.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:"modal-close-button",onClick:D,children:"\xd7"}),(0,a.jsx)("h2",{children:"Detalles del Ticket"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"ID:"})," ",l.id]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"N\xfamero Ticket:"})," ",l.numero_ticket]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"C\xe9dula:"})," ",l.cedula]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Nombre:"})," ",l.nombre]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Tel\xe9fono:"})," ",l.telefono]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Estado:"})," ",l.estado]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Municipio:"})," ",l.municipio]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Parroquia:"})," ",l.parroquia]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Referido ID:"})," ",l.referido_id]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Validado:"})," ",l.validado?"S\xed":"No"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Ganador:"})," ",l.ganador?"S\xed":"No"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Creado en:"})," ",new Date(l.created_at).toLocaleDateString()]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"QR Code:"})}),(0,a.jsx)("img",{src:"data:image/png;base64,".concat(l.qr_ticket),alt:"QR Code"})]})]})]})}),o&&l&&(0,a.jsx)("div",{className:"modal-overlay",onClick:U,children:(0,a.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:"modal-close-button",onClick:U,children:"\xd7"}),(0,a.jsx)("h2",{children:"Editar Ticket"}),(0,a.jsxs)("form",{onSubmit:M,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Validado"}),(0,a.jsx)("input",{type:"checkbox",name:"validado",checked:v.validado,onChange:H,className:"form-checkbox"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Ganador"}),(0,a.jsx)("input",{type:"checkbox",name:"ganador",checked:v.ganador,onChange:H,className:"form-checkbox"})]}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary mt-4",children:"Guardar Cambios"})]})]})})]})};var I=s(1890);let D=()=>{let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!1),[o,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[d,h]=(0,r.useState)(1),[m]=(0,r.useState)(10),[x,p]=(0,r.useState)(1),[g,b]=(0,r.useState)(""),[j,f]=(0,r.useState)({nombre:"",cedula:"",telefono:"",es_referido:!1}),[v,y]=(0,r.useState)(null),[N,C]=(0,r.useState)("info"),[w,S]=(0,r.useState)(!1),[k,_]=(0,r.useState)(null),[P,R]=(0,r.useState)([]),[O,A]=(0,r.useState)(!1),[L,z]=(0,r.useState)(null),[D,U]=(0,r.useState)(null),[q,H]=(0,r.useState)(null),[M,F]=(0,r.useState)(""),[J,G]=(0,r.useState)(!1),[B,V]=(0,r.useState)([]);(0,r.useEffect)(()=>{W()},[]),(0,r.useEffect)(()=>{L&&(Q(),X())},[L,d,g]);let Q=async()=>{if(!L)return;let e=new URLSearchParams({skip:((d-1)*m).toString(),limit:m.toString(),...g&&{search:g}}).toString();try{let s=await fetch("".concat(L,"/api/recolectores/?").concat(e));if(!s.ok)throw Error("Error: ".concat(s.statusText));let a=await s.json();Array.isArray(a.items)?(t(a.items),p(Math.ceil(a.total/m))):(t(a),p(Math.ceil(a.length/m)))}catch(e){console.error("Error fetching recolectores:",e),t([]),p(1)}},W=async()=>{try{let e=await u();z(e)}catch(e){console.error("Error detecting host:",e),z(I.env.HOST||"https://applottobueno.com")}},X=async()=>{if(L)try{let e=await fetch("".concat(L,"/api/estados"));if(!e.ok)throw Error("Error fetching estados");let t=await e.json();V(t)}catch(e){console.error("Error fetching estados:",e),y("Error obteniendo estados"),C("error")}},K=async()=>{k&&L&&(await fetch("".concat(L,"/api/recolectores/").concat(k),{method:"DELETE"}),_(null),S(!1),Q(),y("Recolector eliminado exitosamente"),C("success"))},Y=async()=>{if(L)try{if(!(await fetch("".concat(L,"/api/recolectores"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)})).ok)throw Error("Network response was not ok");f({nombre:"",cedula:"",telefono:"",es_referido:!1}),Q(),ee(),y("Recolector creado exitosamente"),C("success")}catch(e){console.error("Error creating recolector:",e),y("Error creando recolector"),C("error")}},Z=async e=>{if(L)try{if(!(await fetch("".concat(L,"/api/recolectores/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Network response was not ok");Q(),ee(),y("Recolector actualizado exitosamente"),C("success")}catch(e){console.error("Error updating recolector:",e),y("Error actualizando recolector"),C("error")}},$=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;c(e),i(!!e),n(!0)},ee=()=>{n(!1),c(null)},et=e=>{e<1?h(1):e>x?h(x):h(e),Q()},es=async e=>{let t="".concat(L,"/api/recolectores/estadisticas/");e&&(t+="?recolector_id=".concat(e)),M&&(t+="".concat(e?"&":"?","codigo_estado=").concat(M));try{let s=await fetch(t),a=await s.json();R(a),A(!0),e?(U(e),await ea(e)):(U(null),H(null))}catch(e){console.error("Error fetching estad\xedsticas:",e),y("Error obteniendo estad\xedsticas"),C("error")}},ea=async e=>{try{let t="".concat(L,"/api/recolectores/").concat(e,"/referidos");M&&(t+="?codigo_estado=".concat(M));let s=await fetch(t),a=await s.json();H(a)}catch(e){console.error("Error fetching referidos:",e),y("Error obteniendo referidos"),C("error")}},er=async e=>{F(e.target.value),await es(D||void 0)},en=async e=>{if(L)try{G(!0);let t="".concat(L,"/download/excel/recolector-referidos/").concat(e);M&&(t+="?codigo_estado=".concat(M));let s=await fetch(t);if(!s.ok)throw Error("Error al descargar el archivo");let a=await s.blob(),r=window.URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download="referidos_".concat(e,".xlsx"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r),y("Archivo descargado exitosamente"),C("success")}catch(e){console.error("Error downloading file:",e),y("Error al descargar el archivo"),C("error")}finally{G(!1)}},eo=()=>{A(!1),R([])};return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{children:"Control de Recolectores"}),(0,a.jsx)("button",{onClick:()=>$(),className:"btn btn-primary mb-4",children:"Crear Nuevo Recolector"}),(0,a.jsx)("button",{onClick:()=>es(),className:"btn btn-secondary mb-4 ml-2",children:"Ver Estad\xedsticas Generales"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar...",value:g,onChange:e=>{b(e.target.value),h(1)},className:"input input-bordered mb-4"}),(0,a.jsxs)("div",{className:"pagination mb-4 flex justify-center",children:[(0,a.jsx)("button",{onClick:()=>et(1),className:"btn btn-primary mr-1",children:"<<"}),(0,a.jsx)("button",{onClick:()=>et(d-1),className:"btn btn-primary mr-1",children:"<"}),(0,a.jsxs)("span",{className:"btn btn-disabled mr-1",children:["P\xe1gina ",d," de ",x]}),(0,a.jsx)("button",{onClick:()=>et(d+1),className:"btn btn-primary mr-1",children:">"}),(0,a.jsx)("button",{onClick:()=>et(x),className:"btn btn-primary",children:">>"})]}),(0,a.jsxs)("table",{className:"table-auto w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID"}),(0,a.jsx)("th",{children:"Nombre"}),(0,a.jsx)("th",{children:"C\xe9dula"}),(0,a.jsx)("th",{children:"Tel\xe9fono"}),(0,a.jsx)("th",{children:"Referido"}),(0,a.jsx)("th",{children:"Acciones"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.id}),(0,a.jsx)("td",{children:e.nombre}),(0,a.jsx)("td",{children:e.cedula}),(0,a.jsx)("td",{children:e.telefono}),(0,a.jsx)("td",{children:e.es_referido?"S\xed":"No"}),(0,a.jsxs)("td",{children:[(0,a.jsx)("button",{className:"btn btn-primary mr-2",onClick:()=>$(e),children:"Editar"}),(0,a.jsx)("button",{className:"btn btn-danger mr-2",onClick:()=>{_(e.id),S(!0)},children:"Eliminar"}),(0,a.jsx)("button",{className:"btn btn-info",onClick:()=>es(e.id),children:"Ver Estad\xedsticas"})]})]},e.id))})]}),s&&(0,a.jsx)("div",{className:"modal-overlay",onClick:ee,children:(0,a.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:"modal-close-button",onClick:ee,children:"\xd7"}),(0,a.jsx)("h2",{children:o?"Editar Recolector":"Crear Recolector"}),(0,a.jsx)("input",{type:"text",placeholder:"Nombre",value:o&&l?l.nombre:j.nombre,onChange:e=>{o&&l?c({...l,nombre:e.target.value}):f({...j,nombre:e.target.value})},className:"input input-bordered w-full mb-2"}),(0,a.jsx)("input",{type:"text",placeholder:"C\xe9dula",value:o&&l?l.cedula:j.cedula,onChange:e=>{o&&l?c({...l,cedula:e.target.value}):f({...j,cedula:e.target.value})},className:"input input-bordered w-full mb-2"}),(0,a.jsx)("input",{type:"text",placeholder:"Tel\xe9fono",value:o&&l?l.telefono:j.telefono,onChange:e=>{o&&l?c({...l,telefono:e.target.value}):f({...j,telefono:e.target.value})},className:"input input-bordered w-full mb-2"}),(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:o&&l?l.es_referido:j.es_referido,onChange:e=>{o&&l?c({...l,es_referido:e.target.checked}):f({...j,es_referido:e.target.checked})}}),"Es Referido"]}),(0,a.jsx)("button",{onClick:o?()=>Z(l):Y,className:"btn btn-primary",children:o?"Actualizar Recolector":"Crear Recolector"})]})}),v&&(0,a.jsx)(E,{message:v,type:N,onClose:()=>y(null)}),w&&(0,a.jsx)(T,{message:"\xbfEst\xe1s seguro de que quieres eliminar este recolector?",onConfirm:K,onCancel:()=>S(!1)}),O&&(0,a.jsx)("div",{className:"modal-overlay",onClick:eo,children:(0,a.jsxs)("div",{className:"modal-content max-w-7xl w-full p-6",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:"modal-close-button",onClick:eo,children:"\xd7"}),(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Estad\xedsticas de Recolectores"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Filtrar por Estado:"}),(0,a.jsxs)("select",{value:M,onChange:er,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todos los estados"}),B.map(e=>(0,a.jsx)("option",{value:e.codigo_estado,children:e.estado},e.codigo_estado))]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"table-auto w-full mb-4",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID Recolector"}),(0,a.jsx)("th",{children:"Nombre"}),(0,a.jsx)("th",{children:"Cantidad de Tickets"}),(0,a.jsx)("th",{children:"Acciones"})]})}),(0,a.jsx)("tbody",{children:P.map(e=>(0,a.jsxs)("tr",{className:D===e.recolector_id?"bg-blue-100":"",children:[(0,a.jsx)("td",{children:e.recolector_id}),(0,a.jsx)("td",{children:e.nombre}),(0,a.jsx)("td",{children:e.tickets_count}),(0,a.jsxs)("td",{children:[(0,a.jsx)("button",{onClick:()=>es(e.recolector_id),className:"btn btn-sm btn-primary mr-2",children:"Ver Referidos"}),(0,a.jsx)("button",{onClick:()=>en(e.recolector_id),className:"btn btn-sm btn-secondary",disabled:J,children:J?"Descargando...":"Descargar Excel"})]})]},e.recolector_id))})]})}),q&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-3",children:["Referidos de ",q.recolector.nombre,(0,a.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["(Total: ",q.recolector.total_referidos,")"]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"table-auto w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"C\xe9dula"}),(0,a.jsx)("th",{children:"Nombre"}),(0,a.jsx)("th",{children:"Tel\xe9fono"}),(0,a.jsx)("th",{children:"Estado"}),(0,a.jsx)("th",{children:"Municipio"}),(0,a.jsx)("th",{children:"Parroquia"}),(0,a.jsx)("th",{children:"Fecha Registro"})]})}),(0,a.jsx)("tbody",{children:q.referidos.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.cedula}),(0,a.jsx)("td",{children:e.nombre}),(0,a.jsx)("td",{children:e.telefono}),(0,a.jsx)("td",{children:e.estado}),(0,a.jsx)("td",{children:e.municipio}),(0,a.jsx)("td",{children:e.parroquia}),(0,a.jsx)("td",{children:new Date(e.fecha_registro).toLocaleDateString()})]},e.id))})]})})]})]})})]})};var U=s(1890);let q=()=>{let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!1),[o,i]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[d,h]=(0,r.useState)("info"),[m,x]=(0,r.useState)(1),[p]=(0,r.useState)(10),[g,b]=(0,r.useState)(1),[j,f]=(0,r.useState)(""),[v,y]=(0,r.useState)(null),[N,C]=(0,r.useState)({numero:"",operador:""});(0,r.useEffect)(()=>{w(),S()},[m,j]);let w=async()=>{let e=new URLSearchParams({skip:((m-1)*p).toString(),limit:p.toString(),...j&&{search:j}}).toString();try{let s=await fetch("".concat(v,"/api/lineas_telefonicas/?").concat(e));if(!s.ok)throw Error("Error: ".concat(s.statusText));let a=await s.json();Array.isArray(a.items)?(t(a.items),b(Math.ceil(a.total/p))):(t(a),b(Math.ceil(a.length/p)))}catch(e){console.error("Error fetching lineas:",e),t([]),b(1)}},S=async()=>{try{let e=await u();y(e)}catch(e){console.error("Error detecting host:",e),y(U.env.HOST||"https://applottobueno.com")}},E=e=>{i(e),n(!0)},k=()=>{n(!1),i(null)},_=async e=>{await fetch("/api/lineas_telefonicas/".concat(e),{method:"DELETE"}),w()},T=async()=>{try{if(!(await fetch("/api/lineas_telefonicas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)})).ok)throw Error("Network response was not ok")}catch(e){try{if(!(await fetch("/api/lineas_telefonicas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)})).ok)throw Error("Network response was not ok")}catch(e){console.error("Error creating linea telefonica:",e),c("Error creando l\xednea telef\xf3nica"),h("error");return}}C({numero:"",operador:""}),w(),k()},P=async e=>{await fetch("/api/lineas_telefonicas/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),w(),k()},R=e=>{e<1?x(1):e>g?x(g):x(e),w()};return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{children:"Control de L\xedneas Telef\xf3nicas"}),(0,a.jsx)("button",{onClick:()=>E(null),className:"btn btn-primary mb-4",children:"Crear Nueva L\xednea"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar...",value:j,onChange:e=>{f(e.target.value),x(1)},className:"input input-bordered mb-4"}),(0,a.jsxs)("div",{className:"pagination mb-4 flex justify-center",children:[(0,a.jsx)("button",{onClick:()=>R(1),className:"btn btn-primary mr-1",children:"<<"}),(0,a.jsx)("button",{onClick:()=>R(m-1),className:"btn btn-primary mr-1",children:"<"}),(0,a.jsxs)("span",{className:"btn btn-disabled mr-1",children:["P\xe1gina ",m," de ",g]}),(0,a.jsx)("button",{onClick:()=>R(m+1),className:"btn btn-primary mr-1",children:">"}),(0,a.jsx)("button",{onClick:()=>R(g),className:"btn btn-primary",children:">>"})]}),(0,a.jsxs)("table",{className:"table-auto w-full mb-4",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID"}),(0,a.jsx)("th",{children:"N\xfamero"}),(0,a.jsx)("th",{children:"Operador"}),(0,a.jsx)("th",{children:"Acciones"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.id}),(0,a.jsx)("td",{children:e.numero}),(0,a.jsx)("td",{children:e.operador}),(0,a.jsxs)("td",{children:[(0,a.jsx)("button",{className:"btn btn-primary mr-2",onClick:()=>E(e),children:"Editar"}),(0,a.jsx)("button",{className:"btn btn-danger",onClick:()=>_(e.id),children:"Eliminar"})]})]},e.id))})]}),s&&(0,a.jsx)("div",{className:"modal-overlay",onClick:k,children:(0,a.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:"modal-close-button",onClick:k,children:"\xd7"}),(0,a.jsx)("h2",{children:o?"Editar L\xednea":"Crear Nueva L\xednea"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o?P(o):T()},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xfamero"}),(0,a.jsx)("input",{type:"text",name:"numero",value:o?o.numero:N.numero,onChange:e=>{o?i({...o,numero:e.target.value}):C({...N,numero:e.target.value})},className:"input input-bordered w-full mb-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Operador"}),(0,a.jsx)("input",{type:"text",name:"operador",value:o?o.operador:N.operador,onChange:e=>{o?i({...o,operador:e.target.value}):C({...N,operador:e.target.value})},className:"input input-bordered w-full mb-2"})]}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",children:o?"Guardar Cambios":"Crear"})]})]})})]})};var H=s(1890);let M=()=>{let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(1),[o,i]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[p,g]=(0,r.useState)([]),[b,j]=(0,r.useState)([]),[f,v]=(0,r.useState)(null),[y,N]=(0,r.useState)("info"),[C,w]=(0,r.useState)(null);(0,r.useEffect)(()=>{S()},[]),(0,r.useEffect)(()=>{C&&k()},[C]),(0,r.useEffect)(()=>{C&&o?_(o):(j([]),c(""),x(""))},[C,o]);let S=async()=>{try{let e=await u();w(e)}catch(e){console.error("Error detecting host:",e),w(H.env.HOST||"https://applottobueno.com")}},k=async()=>{if(C)try{let e=await fetch("".concat(C,"/api/estados"));if(!e.ok)throw Error("Error: ".concat(e.statusText));let t=(await e.json()).sort((e,t)=>e.estado.localeCompare(t.estado,"es",{sensitivity:"base"}));g(t)}catch(e){console.error("Error fetching estados:",e),g([{codigo_estado:"",estado:"No hay estados disponibles"}])}},_=async e=>{if(C)try{let t=await fetch("".concat(C,"/api/municipios/").concat(encodeURIComponent(e)));if(!t.ok)throw Error("Error: ".concat(t.statusText));let s=(await t.json()).sort((e,t)=>e.municipio.localeCompare(t.municipio,"es",{sensitivity:"base"}));j(s.length>0?s:[{codigo_municipio:"",municipio:"No hay municipios disponibles"}])}catch(e){console.error("Error fetching municipios:",e),j([{codigo_municipio:"",municipio:"No hay municipios disponibles"}])}},T=async()=>{if(C)try{var e,a;let r=(null===(e=p.find(e=>e.codigo_estado.toString()===o.toString()))||void 0===e?void 0:e.estado)||"",n=(null===(a=b.find(e=>e.codigo_municipio.toString()===l.toString()))||void 0===a?void 0:a.municipio)||"",i=JSON.stringify({cantidad_ganadores:s,estado:""!==o&&"Seleccionar Estado"!==o?r:"",municipio:""!==l&&"Seleccionar Municipio"!==l?n:""}),c=await fetch("".concat(C,"/api/sorteo/ganadores"),{method:"POST",headers:{"Content-Type":"application/json"},body:i});if(!c.ok){let e=await c.json();v(e.message||"Error realizando el sorteo. Por favor, intenta de nuevo."),N("error");return}let d=await c.json();t(Array.isArray(d)?d:[]),v("Sorteo realizado exitosamente"),N("success")}catch(e){console.error("Error realizando el sorteo:",e),t([]),v("Error realizando el sorteo. Por favor, intenta de nuevo."),N("error")}},P=async()=>{if(C)try{if(!(await fetch("".concat(C,"/api/sorteo/quitar_ganadores"),{method:"POST"})).ok)throw Error("Error en la respuesta del servidor");t([]),v("Marca de ganadores eliminada exitosamente"),N("success")}catch(e){console.error("Error quitando la marca de ganadores:",e),v("Error quitando la marca de ganadores. Por favor, intenta de nuevo."),N("error")}};return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{children:"Control de Sorteo de Ganadores"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-2",children:"Cantidad de Ganadores"}),(0,a.jsx)("input",{type:"number",value:s,onChange:e=>n(parseInt(e.target.value)),className:"input input-bordered w-full"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-2",children:"Estado"}),(0,a.jsxs)("select",{value:o,onChange:e=>{i(e.target.value);let t=p.find(t=>t.codigo_estado===e.target.value);h(t?t.estado:"")},className:"input input-bordered w-full",children:[(0,a.jsx)("option",{value:"",children:"Seleccionar Estado"}),p.length>0&&"No hay estados disponibles"!==p[0].estado?p.map(e=>(0,a.jsx)("option",{value:e.codigo_estado,children:e.estado},e.codigo_estado)):(0,a.jsx)("option",{value:"",disabled:!0,children:"No hay estados disponibles"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-2",children:"Municipio"}),(0,a.jsxs)("select",{value:l,onChange:e=>{c(e.target.value);let t=b.find(t=>t.codigo_municipio===e.target.value);x(t?t.municipio:"")},className:"input input-bordered w-full",disabled:0===b.length||"No hay municipios disponibles"===b[0].municipio,children:[(0,a.jsx)("option",{value:"",children:"Seleccionar Municipio"}),b.length>0&&"No hay municipios disponibles"!==b[0].municipio?b.map(e=>(0,a.jsx)("option",{value:e.codigo_municipio,children:e.municipio},e.codigo_municipio)):(0,a.jsx)("option",{value:"",disabled:!0,children:"No hay municipios disponibles"})]})]}),(0,a.jsx)("button",{onClick:T,className:"btn btn-primary mr-2",children:"Realizar Sorteo"}),(0,a.jsx)("button",{onClick:P,className:"btn btn-danger",children:"Quitar Marca de Ganadores"}),f&&(0,a.jsx)(E,{message:f,type:y,onClose:()=>v(null)}),(0,a.jsx)("h3",{className:"mt-4",children:"Ganadores del Sorteo"}),(0,a.jsxs)("table",{className:"table-auto w-full mb-4",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID"}),(0,a.jsx)("th",{children:"N\xfamero Ticket"}),(0,a.jsx)("th",{children:"C\xe9dula"}),(0,a.jsx)("th",{children:"Nombre"}),(0,a.jsx)("th",{children:"Tel\xe9fono"}),(0,a.jsx)("th",{children:"Estado"}),(0,a.jsx)("th",{children:"Municipio"})]})}),(0,a.jsx)("tbody",{children:e.length>0?e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.id}),(0,a.jsx)("td",{children:e.numero_ticket}),(0,a.jsx)("td",{children:e.cedula}),(0,a.jsx)("td",{children:e.nombre}),(0,a.jsx)("td",{children:e.telefono}),(0,a.jsx)("td",{children:e.estado}),(0,a.jsx)("td",{children:e.municipio})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"text-center",children:"No hay ganadores disponibles"})})})]})]})};var F=s(5125),J=s(7592),G=s.n(J),B=s(5390),V=s.n(B),Q=s(2280),W=s.n(Q),X=s(8476),K=s.n(X),Y=s(1890);let Z={Inter:G(),Plus_Jakarta_Sans:V(),Open_Sans:W(),PT_Mono:K()};Y.env.NEXT_PUBLIC_CHAT_INTERFACE_INFO,Y.env.NEXT_PUBLIC_CHUNK_INTERFACE_INFO,Y.env.NEXT_PUBLIC_DOCUMENT_INTERFACE_INFO;var $=s(2542),ee=s.n($);let et=()=>{var e,t,s,n,o,i,l,d,h,m,x,p,g;let[b,j]=(0,r.useState)(!1),[f,v]=(0,r.useState)("WELCOME"),[y,N]=(0,r.useState)(!1),[E,k]=(0,r.useState)(""),[_,T]=(0,r.useState)("Default"),[P,O]=(0,r.useState)(null),[L,I]=(0,r.useState)(null),[U,H]=(0,r.useState)(!0),J=P?null===(e=P[_])||void 0===e?void 0:e.Customization.settings.font.value:null,G=J&&(null===(t=Z[J])||void 0===t?void 0:t.className)||"",[B,V]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("session");if(e){let t=JSON.parse(e);j(t.isAdmin),v(t.lastPage||"ELECTORES")}},[]),(0,r.useEffect)(()=>{b&&localStorage.setItem("session",JSON.stringify({isAdmin:b,lastPage:f}))},[b,f]);let Q=async e=>{try{let t=await fetch("".concat(e,"/api/settings"));if(t.ok){let e=await t.json();O(e),T(e.currentTemplate)}else console.error("Failed to fetch settings")}catch(e){console.error("Error fetching settings:",e)}finally{H(!1)}},W=async()=>{try{let e=await u();V(e),await Q(e)}catch(e){console.error("Error detecting host:",e),V(null),H(!1)}},X=async()=>{if(B&&P)try{await fetch("".concat(B,"/api/settings"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedTheme:_,themes:P})})}catch(e){console.error("Failed to update config:",e)}};return((0,r.useEffect)(()=>{W()},[]),(0,r.useEffect)(()=>{X()},[P,_]),(0,r.useEffect)(()=>{if(P){var e,t,s,a,r,n,o,i,l,c,d;document.documentElement.style.setProperty("--primary-verba",null===(e=P[_])||void 0===e?void 0:e.Customization.settings.primary_color.color),document.documentElement.style.setProperty("--secondary-verba",null===(t=P[_])||void 0===t?void 0:t.Customization.settings.secondary_color.color),document.documentElement.style.setProperty("--warning-verba",null===(s=P[_])||void 0===s?void 0:s.Customization.settings.warning_color.color),document.documentElement.style.setProperty("--bg-verba",null===(a=P[_])||void 0===a?void 0:a.Customization.settings.bg_color.color),document.documentElement.style.setProperty("--bg-alt-verba",null===(r=P[_])||void 0===r?void 0:r.Customization.settings.bg_alt_color.color),document.documentElement.style.setProperty("--text-verba",null===(n=P[_])||void 0===n?void 0:n.Customization.settings.text_color.color),document.documentElement.style.setProperty("--text-alt-verba",null===(o=P[_])||void 0===o?void 0:o.Customization.settings.text_alt_color.color),document.documentElement.style.setProperty("--button-verba",null===(i=P[_])||void 0===i?void 0:i.Customization.settings.button_color.color),document.documentElement.style.setProperty("--button-hover-verba",null===(l=P[_])||void 0===l?void 0:l.Customization.settings.button_hover_color.color),document.documentElement.style.setProperty("--bg-console-verba",null===(c=P[_])||void 0===c?void 0:c.Customization.settings.bg_console.color),document.documentElement.style.setProperty("--text-console-verba",null===(d=P[_])||void 0===d?void 0:d.Customization.settings.text_console.color)}},[P,_]),U)?(0,a.jsxs)("div",{className:"flex items-center justify-center h-screen gap-2",children:[(0,a.jsx)(ee(),{loading:!0,size:12,speedMultiplier:.75}),(0,a.jsx)("p",{children:"Cargando Lotto Bueno"})]}):P?(0,a.jsx)("div",{onClick:e=>{e.target,e.currentTarget},children:(0,a.jsxs)("main",{className:b?"min-h-screen p-5 bg-bg-verba text-text-verba ".concat(G):"fixed inset-0 overflow-y-auto bg-white bg-opacity-75 ".concat(G),"data-theme":P?null===(s=P[_])||void 0===s?void 0:s.Customization.settings.theme:"light",children:[""!==E&&(0,a.jsx)(F.GoogleAnalytics,{gaId:E}),(0,a.jsxs)("div",{children:[!b&&"WELCOME"===f&&(0,a.jsx)(S,{title:"Completa tu registro y gana fabulosos premios",subtitle:"En tan solo 3 simples pasos podr\xe1s convertirte en el ganador o ganadora de #LottoBueno",imageSrc:null===(n=P[_])||void 0===n?void 0:n.Customization.settings.image.src,setCurrentPage:v}),!b&&"REGISTER"===f&&(0,a.jsx)(R,{title:null===(o=P[_])||void 0===o?void 0:o.Customization.settings.title.text,subtitle:null===(i=P[_])||void 0===i?void 0:i.Customization.settings.subtitle.text,imageSrc:null===(l=P[_])||void 0===l?void 0:l.Customization.settings.image.src,setCurrentPage:v,onAdminLogin:e=>{"string"==typeof e&&"1234"===e?(j(!0),v("ELECTORES")):"boolean"==typeof e&&(j(e),e&&v("ELECTORES"))}}),b&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)(c,{APIHost:B,production:y,title:null===(d=P[_])||void 0===d?void 0:d.Customization.settings.title.text,subtitle:null===(h=P[_])||void 0===h?void 0:h.Customization.settings.subtitle.text,imageSrc:null===(m=P[_])||void 0===m?void 0:m.Customization.settings.image.src,version:"v1.0.1",currentPage:f,setCurrentPage:v}),(0,a.jsx)("button",{onClick:()=>{j(!1),localStorage.removeItem("session"),v("WELCOME")},className:"btn btn-error btn-sm",children:"Cerrar Sesi\xf3n"})]}),"ELECTORES"===f&&(0,a.jsx)(w,{production:y,settingConfig:P[_],APIHost:B,RAGConfig:L,isAdmin:b,title:null===(x=P[_])||void 0===x?void 0:x.Customization.settings.title.text,subtitle:null===(p=P[_])||void 0===p?void 0:p.Customization.settings.subtitle.text,imageSrc:null===(g=P[_])||void 0===g?void 0:g.Customization.settings.image.src}),"STATUS"===f&&(0,a.jsx)(M,{}),"SETTINGS"===f&&!y&&(0,a.jsx)(C,{settingTemplate:_,setSettingTemplate:T,baseSetting:P,setBaseSetting:O}),"USERS"===f&&!y&&(0,a.jsx)(A,{}),"TICKETS"===f&&!y&&(0,a.jsx)(z,{}),"RECOLECTORES"===f&&!y&&(0,a.jsx)(D,{}),"ADD"===f&&!y&&(0,a.jsx)(q,{})]})]})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-screen gap-2",children:(0,a.jsx)("p",{children:"Error cargando la configuraci\xf3n."})})}},6157:(e,t,s)=>{Promise.resolve().then(s.bind(s,2149))}},e=>{var t=t=>e(e.s=t);e.O(0,[43,263,583,250,17,344,746,441,684,358],()=>t(6157)),_N_E=e.O()}]);