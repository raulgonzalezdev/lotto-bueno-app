(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7408:function(e,t,s){Promise.resolve().then(s.bind(s,8515))},8515:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return H}});var n=s(7437),a=s(2265),i=s(8177),r=s(2562),l=s(7223),o=e=>{let{Icon:t,iconSize:s,title:a,currentPage:i,setPage:r,setCurrentPage:l,APIHost:o,hide:c}=e;return(0,n.jsxs)("button",{disabled:null===o,className:"btn md:btn-sm lg:btn-md ".concat(c?"hidden":"flex"," flex-grow items-center justify-center border-none hover:bg-button-hover-verba ").concat(i===r?"bg-primary-verba text-text-verba":"bg-button-verba text-text-alt-verba"),onClick:e=>{l(r)},children:[(0,n.jsx)(t,{size:s}),(0,n.jsx)("p",{className:"md:text-xs lg:text-sm sm:hidden md:flex",children:a})]},a)},c=e=>{let{imageSrc:t,title:s,subtitle:a,APIHost:c,version:d,currentPage:u,setCurrentPage:m,production:h}=e;return(0,n.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[(0,n.jsx)("img",{src:t,width:80,className:"flex"}),(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end justify-center lg:gap-3",children:[(0,n.jsx)("p",{className:"sm:text-2xl md:text-3xl text-text-verba",children:s}),(0,n.jsx)("p",{className:"sm:text-sm text-base text-text-alt-verba font-light",children:a})]})]}),(0,n.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,n.jsx)("div",{className:"hidden sm:h-[3vh] lg:h-[5vh] bg-text-alt-verba w-px sm:mx-2 md:mx-4"}),(0,n.jsxs)("div",{className:"lg:flex hidden lg:flex-row items-center lg:gap-3 justify-between",children:[(0,n.jsx)("div",{className:" ".concat(h?"h-[0vh]":"sm:h-[3vh] lg:h-[5vh] mx-1"," hidden sm:block bg-text-alt-verba w-px")}),(0,n.jsx)(o,{hide:!1,APIHost:c,Icon:r.B84,iconSize:18,title:"Electores",currentPage:u,setCurrentPage:m,setPage:"ELECTORES"}),(0,n.jsx)(o,{hide:!1,APIHost:c,Icon:i.MTq,iconSize:18,title:"Tickets",currentPage:u,setCurrentPage:m,setPage:"TICKETS"}),(0,n.jsx)(o,{hide:!1,APIHost:c,Icon:i.iz7,iconSize:18,title:"Usuarios",currentPage:u,setCurrentPage:m,setPage:"USERS"}),(0,n.jsx)(o,{hide:!1,APIHost:c,Icon:r.oMF,iconSize:18,title:"Recolectores",currentPage:u,setCurrentPage:m,setPage:"RECOLECTORES"}),(0,n.jsx)(o,{hide:!1,APIHost:c,Icon:r.e55,iconSize:18,title:"Sortear Ganadors",currentPage:u,setCurrentPage:m,setPage:"STATUS"}),(0,n.jsx)("div",{className:" ".concat(h?"h-[0vh]":"sm:h-[3vh] lg:h-[5vh] mx-1"," hidden sm:block bg-text-alt-verba w-px")}),(0,n.jsx)(o,{hide:h,APIHost:c,Icon:r.J7v,iconSize:18,title:"Lineas Telefonicas",currentPage:u,setCurrentPage:m,setPage:"ADD"}),(0,n.jsx)(o,{hide:h,APIHost:c,Icon:i.zfW,iconSize:18,title:"Configuracion",currentPage:u,setCurrentPage:m,setPage:"SETTINGS"}),(0,n.jsx)("div",{className:"sm:h-[3vh] lg:h-[5vh] mx-1 hidden sm:block bg-text-alt-verba w-px"})]}),(0,n.jsx)("div",{className:"flex flex-row items-center sm:gap-1 lg:gap-5 justify-between",children:(0,n.jsx)("div",{className:"lg:hidden sm:flex md:ml-4 sm:mr-8",children:(0,n.jsx)("ul",{className:"menu md:menu-md sm:menu-sm sm:menu-horizontal bg-base-200 rounded-box bg-bg-alt-verba z-50",children:(0,n.jsx)("li",{children:(0,n.jsxs)("details",{children:[(0,n.jsx)("summary",{children:(0,n.jsx)(l.bqP,{size:20})}),(0,n.jsxs)("ul",{className:"bg-bg-alt-verba",children:[(0,n.jsx)("li",{onClick:()=>m("ELECTORES"),children:(0,n.jsx)("a",{children:"Electores"})}),(0,n.jsx)("li",{onClick:()=>m("TICKETS"),children:(0,n.jsx)("a",{children:"Tickets"})}),(0,n.jsx)("li",{onClick:()=>m("USERS"),children:(0,n.jsx)("a",{children:"Usuarios"})}),(0,n.jsx)("li",{onClick:()=>m("RECOLECTORES"),children:(0,n.jsx)("a",{children:"Recolectores"})}),(0,n.jsx)("li",{onClick:()=>m("STATUS"),children:(0,n.jsx)("a",{children:"Sorteos"})}),!h&&(0,n.jsx)("li",{onClick:()=>m("SETTINGS"),children:(0,n.jsx)("a",{children:"Settings"})})]})]})})})})})]})]})};let d=async()=>"https://sas.uaenorth.cloudapp.azure.com:8000";var u=s(4063),m=s(5125),h=e=>{let{title:t,TextFieldSetting:s,setting:a,settingsConfig:i,setSettingsConfig:r}=e;return(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("p",{children:s.description})}),(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full bg-bg-verba",children:(0,n.jsx)("input",{type:"text",className:"grow",placeholder:t,value:i[a].settings[t].text,onChange:e=>{let s=e.target.value;r(e=>{let n=JSON.parse(JSON.stringify(e));return n[a].settings[t].text=s,n})}})})})]},t)},x=e=>{let{title:t,ImageFieldSetting:s,setting:a,settingsConfig:i,setSettingsConfig:r}=e;return(0,n.jsxs)("div",{className:"flex flex-col justify-center gap-1",children:[(0,n.jsx)("div",{className:"flex justify-center items-center",children:(0,n.jsx)("p",{children:s.description})}),(0,n.jsx)("div",{className:"flex justify-center items-center",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex justify-center items-center mt-4",children:(0,n.jsx)("img",{src:i[a].settings[t].src,alt:"Logo",className:"max-w-xs max-h-32 rounded-xl"})}),(0,n.jsxs)("div",{className:"flex justify-center items-center mt-1",children:[(0,n.jsx)("button",{onClick:()=>{var e;return null===(e=document.getElementById("LogoImageInput"))||void 0===e?void 0:e.click()},className:"btn border-none text-xs bg-bg-verba text-text-alt-verba",children:"A\xf1adir Logotipo"}),(0,n.jsx)("input",{id:"LogoImageInput",type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let s=new FileReader;s.onload=e=>{r(s=>{var n;let i=JSON.parse(JSON.stringify(s));return i[a].settings[t].src=null===(n=e.target)||void 0===n?void 0:n.result,i})},s.readAsDataURL(e.target.files[0])}},className:"hidden"})]})]})})]},t)},g=s(3478),j=e=>{let{title:t,ColorSetting:s,setting:a,settingsConfig:i,setSettingsConfig:r}=e,l=e=>{r(s=>{let n=JSON.parse(JSON.stringify(s));return n[a].settings[t].color=e,n})};return(0,n.jsxs)("div",{className:"flex flex-col justify-center gap-1",children:[(0,n.jsx)("div",{className:"flex justify-center items-center",children:(0,n.jsx)("p",{children:s.description})}),(0,n.jsx)("div",{className:"flex gap-2 justify-center items-center",children:(0,n.jsxs)("div",{className:"flex flex-col gap-1 h-[15vh]",children:[(0,n.jsx)("label",{className:"input bg-bg-verba input-sm input-bordered flex items-center gap-2 w-full",children:(0,n.jsx)("input",{type:"text",className:"grow",placeholder:t,value:i[a].settings[t].color,onChange:e=>{l(e.target.value)}})}),(0,n.jsx)(g.gW,{color:i[a].settings[t].color,onChange:e=>{l(e)}})]})})]},t)},p=e=>{let{title:t,SelectSetting:s,setting:a,settingsConfig:i,setSettingsConfig:r,setSettingTemplate:l}=e;return(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("p",{children:s.description})}),(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("select",{value:i[a].settings[t].value,onChange:e=>{let s=e.target.value;r(e=>{let n={...e};return n[a].settings[t].value=s,n})},className:"select bg-bg-verba",children:s.options.map(e=>(0,n.jsx)("option",{value:e,children:e},"Select_"+e))})})]},t)},b=e=>{let{title:t,CheckboxSetting:s,setting:a,settingsConfig:i,setSettingsConfig:r}=e;return(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("p",{children:s.description})}),(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("input",{type:"checkbox",className:"toggle",checked:i[a].settings[t].checked,onChange:e=>{let s=e.target.checked;r(e=>{let n=JSON.parse(JSON.stringify(e));return n[a].settings[t].checked=s,n})}})})]},t)},f=e=>{let{title:t,NumberFieldSetting:s,setting:a,settingsConfig:i,setSettingsConfig:r}=e;return(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("p",{children:s.description})}),(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full bg-bg-verba",children:(0,n.jsx)("input",{type:"number",className:"grow",placeholder:t,value:i[a].settings[t].value,onChange:e=>{let s=e.target.value;r(e=>{let n=JSON.parse(JSON.stringify(e));return n[a].settings[t].value=s,n})}})})})]},t)},v=e=>{let{Icon:t,iconSize:s,title:a,currentSetting:i,setSetting:r,setSettingString:l}=e;return(0,n.jsxs)("button",{className:"btn lg:btn-lg flex items-center justify-center border-none hover:bg-button-hover-verba ".concat(i===l?"bg-primary-verba text-text-verba":"bg-button-verba text-text-alt-verba"),onClick:e=>{r(l)},children:[(0,n.jsx)(t,{size:s}),(0,n.jsx)("p",{className:"sm:hidden md:flex md:text-base lg:text-lg",children:a})]},a)},y=e=>{var t;let{settingTemplate:s,setSettingTemplate:r,baseSetting:o,setBaseSetting:c}=e,[g,y]=(0,a.useState)("Customization"),[N,C]=(0,a.useState)(null!==(t=o[s])&&void 0!==t?t:{Customization:{title:"",description:"",settings:{}},Chat:{title:"",description:"",settings:{}}}),[S,w]=(0,a.useState)("https://lot.uaenorth.cloudapp.azure.com"),[k,E]=(0,a.useState)([]);(0,a.useEffect)(()=>{E(Object.keys(o).filter(e=>"currentTemplate"!==e&&!["selectedTheme","themes"].includes(e)))},[o]),(0,a.useEffect)(()=>{P()},[]),(0,a.useEffect)(()=>{_()},[]);let _=async()=>{try{await d(),w("https://lot.uaenorth.cloudapp.azure.com")}catch(e){console.error("Error detecting host:",e),w("https://lot.uaenorth.cloudapp.azure.com")}},P=async()=>{var e;let t=await fetch("".concat(S,"/api/settings")),n=await t.json();c(n),C(null!==(e=n[s])&&void 0!==e?e:{Customization:{title:"",description:"",settings:{}},Chat:{title:"",description:"",settings:{}}}),r(n.currentTemplate)},T=async()=>{let e={...o,[s]:N,currentTemplate:s};c(e),await fetch("".concat(S,"/api/settings"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},z=(e,t)=>{if(""===g)return null;switch(t.type){case"text":return(0,n.jsx)(h,{title:e,setting:g,TextFieldSetting:t,settingsConfig:N,setSettingsConfig:C});case"image":return(0,n.jsx)(x,{title:e,setting:g,ImageFieldSetting:t,settingsConfig:N,setSettingsConfig:C});case"check":return(0,n.jsx)(b,{title:e,setting:g,CheckboxSetting:t,settingsConfig:N,setSettingsConfig:C});case"select":return(0,n.jsx)(p,{title:e,setting:g,SelectSetting:t,settingsConfig:N,setSettingsConfig:C});case"color":return(0,n.jsx)(j,{title:e,setting:g,ColorSetting:t,settingsConfig:N,setSettingsConfig:C});case"number":return(0,n.jsx)(f,{title:e,setting:g,NumberFieldSetting:t,settingsConfig:N,setSettingsConfig:C});default:return null}};return(0,n.jsxs)("div",{className:"flex justify-between items-start gap-5",children:[(0,n.jsxs)("div",{className:"hidden lg:flex lg:flex-col gap-5 lg:w-1/4",children:[(0,n.jsxs)("div",{className:"flex flex-col justify-center items-center gap-5",children:[(0,n.jsx)("p",{className:"md:text-base lg:text-lg text-text-alt-verba",children:"Settings"}),(0,n.jsxs)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-5 rounded-lg shadow-lg gap-2",children:[(0,n.jsx)(v,{Icon:u._TT,iconSize:20,title:"Personaliza App",currentSetting:g,setSetting:y,setSettingString:"Customization"}),(0,n.jsx)(v,{Icon:i.utr,iconSize:20,title:"Configuraciones de chat",currentSetting:g,setSetting:y,setSettingString:""})]})]}),""!=g&&N&&(0,n.jsxs)("div",{className:"sm:hidden md:flex flex-col justify-center items-center gap-5",children:[(0,n.jsx)("p",{className:"md:text-base lg:text-lg text-text-alt-verba",children:"Description"}),(0,n.jsx)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-5 rounded-lg shadow-lg gap-2",children:(0,n.jsx)("p",{className:"sm:text-xs md:text-sm lg:text-base",children:N[g]?N[g].description:""})})]})]}),(0,n.jsxs)("div",{className:"flex flex-col lg:justify-center justify-start lg:items-center items-start gap-5 w-full lg:w-3/4",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-center w-full",children:[(0,n.jsx)("div",{className:"lg:hidden sm:flex md:ml-4 sm:mr-8",children:(0,n.jsx)("ul",{className:"menu menu-sm sm:menu-horizontal bg-base-200 rounded-box bg-bg-alt-verba z-40",children:(0,n.jsx)("li",{children:(0,n.jsxs)("details",{children:[(0,n.jsxs)("summary",{children:[(0,n.jsx)(l.bqP,{size:15})," Ajustes"]}),(0,n.jsxs)("ul",{className:"bg-bg-alt-verba",children:[(0,n.jsx)("li",{onClick:()=>y("Customization"),children:(0,n.jsx)("a",{children:"Personalizar App"})}),(0,n.jsx)("li",{onClick:()=>y("Chat"),children:(0,n.jsx)("a",{children:"Configuraciones de chat"})})]})]})})})}),(0,n.jsx)("p",{className:"sm:hidden md:flex text-lg text-text-alt-verba",children:"Configuracion"}),(0,n.jsx)("select",{value:s,onChange:e=>{var t;let s=e.target.value;r(s),C(null!==(t=o[s])&&void 0!==t?t:{Customization:{title:"",description:"",settings:{}},Chat:{title:"",description:"",settings:{}}})},className:"select select-md lg:select-sm text-xs bg-bg-alt-verba text-text-verba",children:k.map(e=>(0,n.jsx)("option",{value:e,children:e},"Template"+e))})]}),(0,n.jsxs)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-10 rounded-lg shadow-lg h-[70vh] gap-2 overflow-y-scroll",children:[(0,n.jsx)("p",{className:"font-bold text-2xl lg:mb-5",children:g}),""!=g&&N&&(0,n.jsxs)("div",{className:"lg:hidden flex flex-col items-start gap-5 mb-5",children:[(0,n.jsx)("p",{className:"md:text-base lg:text-lg text-text-alt-verba",children:"Descricion"}),(0,n.jsx)("div",{className:"flex flex-col w-full gap-2",children:(0,n.jsx)("p",{className:"sm:text-xs md:text-sm lg:text-base",children:N[g]?N[g].description:""})})]}),(0,n.jsx)("div",{className:"flex-coll gap-4 grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:g&&N&&Object.entries(N[g].settings).map(e=>{let[t,s]=e;return z(t,s)})}),(0,n.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,n.jsxs)("button",{onClick:T,className:"btn flex items-center justify-center border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba",children:[(0,n.jsx)(u.FJM,{}),(0,n.jsx)("p",{className:"",children:"Aplicar"})]}),(0,n.jsxs)("button",{onClick:()=>{var e;C(null!==(e=o[s])&&void 0!==e?e:{Customization:{title:"",description:"",settings:{}},Chat:{title:"",description:"",settings:{}}})},className:"btn flex items-center justify-center border-none text-text-verba bg-warning-verba hover:bg-button-hover-verba",children:[(0,n.jsx)(m.B4e,{}),(0,n.jsx)("p",{className:"",children:"Reiniciar"})]})]})]})]})]})},N=e=>{let{production:t,settingConfig:s,APIHost:i,RAGConfig:r,isAdmin:l,title:o,subtitle:c,imageSrc:d}=e,[u,m]=(0,a.useState)([]),[h,x]=(0,a.useState)(!1),[g,j]=(0,a.useState)(null),[p,b]=(0,a.useState)(1),[f]=(0,a.useState)(10),[v,y]=(0,a.useState)(1),[N,C]=(0,a.useState)(""),[S,w]=(0,a.useState)(""),[k,E]=(0,a.useState)([]),[_,P]=(0,a.useState)([]),[T,z]=(0,a.useState)([]),[A,R]=(0,a.useState)([]),[I,O]=(0,a.useState)(""),[L,D]=(0,a.useState)(""),[U,q]=(0,a.useState)(""),[J,M]=(0,a.useState)("");(0,a.useEffect)(()=>{G(),V(),Q()},[I,L,U,J,p]);let G=async()=>{try{let e=await fetch("".concat(i,"/estados/")),t=await e.json(),s=Array.from(new Set(t.map(e=>e.estado))).map(e=>t.find(t=>t.estado===e));E(s)}catch(e){console.error("Error fetching estados:",e)}},B=async e=>{try{let t=await fetch("".concat(i,"/municipios/").concat(e)),s=await t.json();P(s)}catch(e){console.error("Error fetching municipios:",e)}},F=async(e,t)=>{try{let s=await fetch("".concat(i,"/parroquias/").concat(e,"/").concat(t)),n=await s.json();z(n)}catch(e){console.error("Error fetching parroquias:",e)}},H=async(e,t,s)=>{try{let n=await fetch("".concat(i,"/centros_votacion/").concat(e,"/").concat(t,"/").concat(s)),a=await n.json();R(a)}catch(e){console.error("Error fetching centros votacion:",e)}},V=async()=>{try{let e=new URLSearchParams({skip:((p-1)*f).toString(),limit:f.toString(),...I&&{codigo_estado:I},...L&&{codigo_municipio:L},...U&&{codigo_parroquia:U},...J&&{codigo_centro_votacion:J}}).toString(),t=await fetch("".concat(i,"/electores/?").concat(e)),s=await t.json();m(Array.isArray(s)?s:[])}catch(e){console.error("Error fetching electores:",e),m([])}},Q=async()=>{try{let e=new URLSearchParams({...I&&{codigo_estado:I},...L&&{codigo_municipio:L},...U&&{codigo_parroquia:U},...J&&{codigo_centro_votacion:J}}).toString(),t=await fetch("".concat(i,"/total/electores?").concat(e)),s=await t.json();y(Math.ceil(s/f))}catch(e){console.error("Error fetching total electores:",e),y(1)}},W=async e=>{if(i)try{let t=await fetch("".concat(i,"/electores/cedula/").concat(e)),s=await t.json();j(s)}catch(e){console.error("Error fetching elector detail:",e)}},K=async()=>{if(S)try{let e=await fetch("".concat(i,"/electores/cedula/").concat(S)),t=await e.json();j(t),x(!0)}catch(e){console.error("Error searching by cedula:",e)}},Y=e=>{W(e),x(!0)},$=()=>{x(!1),j(null)},X=e=>{e<1?b(1):e>v?b(v):b(e),V()};return(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h2",{children:"Control de Electores"}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Estado:"}),(0,n.jsxs)("select",{onChange:e=>{let t=e.target.value;O(t),D(""),q(""),R([]),B(t)},className:"input input-bordered w-full",value:I,children:[(0,n.jsx)("option",{value:"",children:"Seleccione un estado"}),k.map(e=>(0,n.jsx)("option",{value:e.codigo_estado,children:e.estado},e.codigo_estado))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Municipio:"}),(0,n.jsxs)("select",{onChange:e=>{let t=e.target.value;D(t),q(""),R([]),F(I,t)},className:"input input-bordered w-full",value:L,disabled:!I,children:[(0,n.jsx)("option",{value:"",children:"Seleccione un municipio"}),_.map(e=>(0,n.jsx)("option",{value:e.codigo_municipio,children:e.municipio},e.codigo_municipio))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Parroquia:"}),(0,n.jsxs)("select",{onChange:e=>{let t=e.target.value;q(t),H(I,L,t)},className:"input input-bordered w-full",value:U,disabled:!L,children:[(0,n.jsx)("option",{value:"",children:"Seleccione una parroquia"}),T.map(e=>(0,n.jsx)("option",{value:e.codigo_parroquia,children:e.parroquia},e.codigo_parroquia))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"Centro de Votaci\xf3n:"}),(0,n.jsxs)("select",{onChange:e=>{M(e.target.value)},className:"input input-bordered w-full",value:J,disabled:!U,children:[(0,n.jsx)("option",{value:"",children:"Seleccione un centro de votaci\xf3n"}),A.map(e=>(0,n.jsx)("option",{value:e.codificacion_nueva_cv,children:e.nombre_cv},e.codificacion_nueva_cv))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"B\xfasqueda por c\xe9dula:"}),(0,n.jsx)("input",{type:"text",value:S,onChange:e=>{w(e.target.value)},className:"input input-bordered w-full"}),(0,n.jsx)("button",{onClick:K,className:"btn btn-primary w-full mt-2",children:"Buscar"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{children:"B\xfasqueda general:"}),(0,n.jsx)("input",{type:"text",value:N,onChange:e=>{C(e.target.value)},className:"input input-bordered w-full"})]})]}),(0,n.jsxs)("div",{className:"pagination mb-4 flex justify-center",children:[(0,n.jsx)("button",{onClick:()=>X(1),className:"btn btn-primary mr-1",children:"<<"}),(0,n.jsx)("button",{onClick:()=>X(p-1),className:"btn btn-primary mr-1",children:"<"}),(0,n.jsxs)("span",{className:"btn btn-disabled mr-1",children:["P\xe1gina ",p," de ",v]}),(0,n.jsx)("button",{onClick:()=>X(p+1),className:"btn btn-primary mr-1",children:">"}),(0,n.jsx)("button",{onClick:()=>X(v),className:"btn btn-primary",children:">>"})]}),(0,n.jsxs)("table",{className:"table-auto w-full mb-4",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"C\xe9dula"}),(0,n.jsx)("th",{children:"Nombre"}),(0,n.jsx)("th",{children:"Apellido"}),(0,n.jsx)("th",{children:"Centro de Votaci\xf3n"}),(0,n.jsx)("th",{children:"Acciones"})]})}),(0,n.jsx)("tbody",{children:u.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"".concat(null==e?void 0:e.letra_cedula,"-").concat(null==e?void 0:e.numero_cedula)}),(0,n.jsx)("td",{children:null==e?void 0:e.p_nombre}),(0,n.jsx)("td",{children:null==e?void 0:e.p_apellido}),(0,n.jsx)("td",{children:null==e?void 0:e.codigo_centro_votacion}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{className:"btn btn-primary",onClick:()=>Y(null==e?void 0:e.numero_cedula),children:"Ver Detalle"})})]},null==e?void 0:e.id))})]}),h&&(0,n.jsx)("div",{className:"modal-overlay",onClick:$,children:(0,n.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{className:"modal-close-button",onClick:$,children:"\xd7"}),(0,n.jsx)("h2",{children:"Detalle del Elector"}),g&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"ID:"})," ",g.elector.id]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"C\xe9dula:"})," ","".concat(g.elector.letra_cedula,"-").concat(g.elector.numero_cedula)]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Nombre:"})," ","".concat(g.elector.p_nombre," ").concat(g.elector.s_nombre)]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Apellido:"})," ","".concat(g.elector.p_apellido," ").concat(g.elector.s_apellido)]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Sexo:"})," ",g.elector.sexo]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Fecha Nacimiento:"})," ",new Date(g.elector.fecha_nacimiento).toLocaleDateString()]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Estado:"})," ",g.geografico.estado]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Municipio:"})," ",g.geografico.municipio]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Parroquia:"})," ",g.geografico.parroquia]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Centro de Votaci\xf3n:"})," ",g.centro_votacion.nombre_cv]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Direcci\xf3n Centro de Votaci\xf3n:"})," ",g.centro_votacion.direccion_cv]})]})]})})]})},C=e=>{let{title:t,subtitle:s,imageSrc:a,setCurrentPage:i}=e;return(0,n.jsxs)("div",{className:"welcome-page p-4 flex flex-col items-center",children:[(0,n.jsx)("img",{src:a,width:80,className:"flex",alt:"Logo"}),(0,n.jsx)("h1",{className:"text-4xl font-bold mb-2 text-center",children:t}),(0,n.jsx)("h2",{className:"text-xl mb-6 text-center",children:s}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("button",{onClick:()=>i("REGISTER"),className:"register-button bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Registrarse"})}),(0,n.jsx)("footer",{className:"footer footer-center p-4 mt-8 bg-gray-800 text-white w-full",children:(0,n.jsx)("aside",{children:(0,n.jsx)("p",{children:"Build with ♥ and Caltion \xa9 2024"})})})]})},S=e=>{let t,{message:s,type:i,onClose:r}=e;switch(i){case"success":t="bg-green-500";break;case"error":t="bg-red-500";break;case"info":t="bg-blue-500"}return(0,a.useEffect)(()=>{let e=setTimeout(r,5e3);return()=>clearTimeout(e)},[r]),(0,n.jsx)("div",{className:"".concat(t," text-white p-4 rounded fixed bottom-4 right-4 z-50"),children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{children:s}),(0,n.jsx)("button",{onClick:r,className:"ml-4",children:"\xd7"})]})})},w=e=>{let{isVisible:t,onClose:s,onAdminLogin:i,setCurrentPage:r,title:l,subtitle:o,imageSrc:c,APIHost:d}=e,[u,m]=(0,a.useState)(!0),[h,x]=(0,a.useState)(""),[g,j]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),[f,v]=(0,a.useState)(null),[y,N]=(0,a.useState)("info"),C=async()=>{let e=d||"https://lot.uaenorth.cloudapp.azure.com";try{let t=await fetch("".concat(e,"/api/login"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:h,password:g})}),n=await t.json();t.ok&&n.isAdmin?(i(!0),r("ELECTORES"),v("Inicio de sesi\xf3n exitoso"),N("success"),s()):(v("Inicio de sesi\xf3n fallido: "+(n.detail||"No autorizado")),N("error"),i(!1))}catch(e){console.error("Error al iniciar sesi\xf3n:",e),v("Error al iniciar sesi\xf3n. Por favor, int\xe9ntelo de nuevo."),N("error")}x(""),j("")},w=async()=>{let e=d||"https://lot.uaenorth.cloudapp.azure.com";try{let t=await fetch("".concat(e,"/api/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:h,email:p,password:g,isAdmin:!1})}),s=await t.json();t.ok?(v("Registro exitoso. Ahora puedes iniciar sesi\xf3n."),N("success"),m(!0)):(v("Registro fallido: "+s.detail),N("error"))}catch(e){console.error("Error al registrarse:",e),v("Error al registrarse. Por favor, int\xe9ntelo de nuevo."),N("error")}x(""),b(""),j("")};return t?(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-5 mb-4",children:[(0,n.jsx)("img",{src:c,width:80,className:"flex"}),(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end justify-center lg:gap-3",children:[(0,n.jsx)("p",{className:"sm:text-2xl md:text-3xl text-text-verba",children:l}),(0,n.jsx)("p",{className:"sm:text-sm text-base text-text-alt-verba font-light",children:o})]})]}),(0,n.jsx)("h2",{className:"text-lg font-bold mb-4",children:u?"Inicio de Sesi\xf3n Admin":"Registro"}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),placeholder:"Nombre de usuario",className:"input input-bordered w-full mb-2"}),(0,n.jsx)("input",{type:"password",value:g,onChange:e=>j(e.target.value),placeholder:"Contrase\xf1a",className:"input input-bordered w-full mb-2"}),!u&&(0,n.jsx)("input",{type:"email",value:p,onChange:e=>b(e.target.value),placeholder:"Correo electr\xf3nico",className:"input input-bordered w-full mb-2"})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("button",{onClick:u?C:w,className:"btn btn-primary",children:u?"Iniciar Sesi\xf3n":"Registrarse"}),(0,n.jsx)("button",{onClick:s,className:"btn",children:"Cancelar"})]}),(0,n.jsx)("div",{className:"mt-4 text-center",children:(0,n.jsx)("button",{onClick:()=>m(!u),className:"text-blue-500 hover:underline",children:u?"\xbfNo tienes una cuenta? Reg\xedstrate":"\xbfYa tienes una cuenta? Inicia sesi\xf3n"})}),f&&(0,n.jsx)(S,{message:f,type:y,onClose:()=>v(null)})]})}):null},k=e=>{let{message:t,onConfirm:s,onCancel:a}=e;return(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[(0,n.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Confirmaci\xf3n"}),(0,n.jsx)("p",{className:"mb-4",children:t}),(0,n.jsxs)("div",{className:"flex justify-end",children:[(0,n.jsx)("button",{onClick:a,className:"btn mr-2",children:"Cancelar"}),(0,n.jsx)("button",{onClick:s,className:"btn btn-primary",children:"Confirmar"})]})]})})},E=e=>{let{title:t,subtitle:s,imageSrc:i,setCurrentPage:r,onAdminLogin:l}=e,[o,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),[x,g]=(0,a.useState)([]),[j,p]=(0,a.useState)({cedula:"",telefono:"",referido_id:1}),[b,f]=(0,a.useState)(null),[v,y]=(0,a.useState)("info"),[N,C]=(0,a.useState)(""),[E,_]=(0,a.useState)(!1),[P,T]=(0,a.useState)(!1),z="http://localhost:/8000";(0,a.useEffect)(()=>{A()},[]);let A=async()=>{try{let e=await fetch("".concat(z,"/recolectores/")),t=await e.json();g(t)}catch(e){console.error("Error fetching referidos:",e)}},R=e=>{let{name:t,value:s}=e.target;p(e=>({...e,[t]:s}))},I=e=>{h(e),u(!0)},O=()=>{u(!1),h(null),T(!0)},L=async e=>{if(e.preventDefault(),_(!0),f(null),!/^58\d{10}$/.test(j.telefono)){f("El n\xfamero de tel\xe9fono debe comenzar con el c\xf3digo de pa\xeds (58) y tener 10 d\xedgitos adicionales."),y("error"),_(!1);return}try{let e=await fetch("".concat(z,"/generate_ticket"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cedula:j.cedula,telefono:j.telefono,referido_id:j.referido_id||1})}),t=await e.json();200===e.status?"success"===t.status?(t.qr_code&&I(t.qr_code),f(t.message),y("success")):(t.message.includes("404 Client Error: Not Found")?f("La c\xe9dula no es v\xe1lida y debe estar inscrita en el registro electoral."):f(t.message||"Error generando el ticket. Por favor, intenta de nuevo."),y("info")):(f("Error generando el ticket. Por favor, intenta de nuevo."),y("error"))}catch(e){console.error("Error generating ticket:",e),f("Error generando el ticket. Por favor, intenta de nuevo."),y("error")}_(!1)},D=x.filter(e=>"".concat(e.cedula," ").concat(e.nombre).toLowerCase().includes(N.toLowerCase()));return(0,n.jsxs)("div",{className:"register-page p-4 flex flex-col items-center",children:[(0,n.jsx)("img",{src:i,width:80,className:"flex",alt:"Logo"}),(0,n.jsx)("h1",{className:"text-4xl font-bold mb-2 text-center",children:t}),(0,n.jsx)("h2",{className:"text-xl mb-6 text-center",children:s}),(0,n.jsxs)("form",{className:"space-y-4 w-full max-w-md",onSubmit:L,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Promotor"}),(0,n.jsx)("input",{type:"text",placeholder:"Buscar promotor...",className:"inputField mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:N,onChange:e=>C(e.target.value)}),(0,n.jsxs)("select",{name:"referido_id",className:"inputField mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:R,value:j.referido_id,children:[(0,n.jsx)("option",{value:"1",children:"System"}),D.map(e=>(0,n.jsx)("option",{value:e.id,children:"".concat(e.cedula," - ").concat(e.nombre)},e.id))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"C\xe9dula"}),(0,n.jsx)("input",{type:"text",name:"cedula",className:"inputField mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:j.cedula,onChange:R})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tel\xe9fono"}),(0,n.jsx)("input",{type:"text",name:"telefono",className:"inputField mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:j.telefono,onChange:R})]}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700",disabled:E,children:E?(0,n.jsx)("span",{className:"spinner"}):"Registrar"})})]}),(0,n.jsx)("div",{className:"mt-4 text-center",children:(0,n.jsx)("button",{onClick:()=>{c(!0)},className:"text-blue-500 hover:underline",children:"Ir al Dashboard"})}),(0,n.jsx)(w,{isVisible:o,onClose:()=>{c(!1)},onAdminLogin:l,setCurrentPage:r,title:t,subtitle:s,imageSrc:i,APIHost:z}),d&&m&&(0,n.jsx)("div",{className:"modal-overlay",onClick:O,children:(0,n.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{className:"modal-close-button",onClick:O,children:"\xd7"}),(0,n.jsx)("h2",{children:"Ticket Generado"}),(0,n.jsx)("img",{src:"data:image/png;base64,".concat(m),alt:"QR Code"}),(0,n.jsx)("p",{children:"El ticket ha sido generado exitosamente."})]})}),b&&(0,n.jsx)(S,{message:b,type:v,onClose:()=>f(null)}),P&&(0,n.jsx)(k,{message:"\xbfQuieres registrar otro ticket?",onConfirm:()=>{p({cedula:"",telefono:"",referido_id:1}),T(!1)},onCancel:()=>{T(!1)}})]})},_=()=>{let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!1),[r,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(1),[h]=(0,a.useState)(10),[x,g]=(0,a.useState)(1),[j,p]=(0,a.useState)(""),[b,f]=(0,a.useState)({username:"",email:"",password:"",isAdmin:!1}),[v,y]=(0,a.useState)(null),[N,C]=(0,a.useState)("info"),[w,k]=(0,a.useState)(null);(0,a.useEffect)(()=>{E()},[]),(0,a.useEffect)(()=>{_()},[w,u,j]);let E=async()=>{try{let e=await d();k(e||"https://lot.uaenorth.cloudapp.azure.com")}catch(e){console.error("Error detecting host:",e),k("https://lot.uaenorth.cloudapp.azure.com")}},_=async()=>{if(!w)return;let e=new URLSearchParams({skip:(u-1)*h,limit:h,...j&&{search:j}}).toString();try{let s=await fetch("".concat(w,"/api/users?").concat(e)),n=await s.json();t(n),g(Math.ceil(n.length/h))}catch(e){console.error("Error fetching users:",e),t([]),g(1)}},P=async e=>{if(w)try{await fetch("".concat(w,"/api/users/").concat(e),{method:"DELETE"}),_(),y("Usuario eliminado exitosamente"),C("success")}catch(e){console.error("Error eliminando usuario:",e),y("Error eliminando usuario. Por favor, intenta de nuevo."),C("error")}},T=async()=>{if(w)try{await fetch("".concat(w,"/api/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),f({username:"",email:"",password:"",isAdmin:!1}),_(),R(),y("Usuario creado exitosamente"),C("success")}catch(e){console.error("Error creando usuario:",e),y("Error creando usuario. Por favor, intenta de nuevo."),C("error")}},z=async e=>{if(w)try{await fetch("".concat(w,"/api/users/").concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),_(),R(),y("Usuario actualizado exitosamente"),C("success")}catch(e){console.error("Error actualizando usuario:",e),y("Error actualizando usuario. Por favor, intenta de nuevo."),C("error")}},A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;c(e),l(!!e),i(!0)},R=()=>{i(!1),c(null)},I=e=>{e<1?m(1):e>x?m(x):m(e),_()};return(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h2",{children:"Control de Usuarios"}),(0,n.jsx)("button",{onClick:()=>A(),className:"btn btn-primary mb-4",children:"Create New User"}),(0,n.jsx)("input",{type:"text",placeholder:"Buscar...",value:j,onChange:e=>{p(e.target.value)},className:"input input-bordered mb-4"}),(0,n.jsxs)("div",{className:"pagination mb-4 flex justify-center",children:[(0,n.jsx)("button",{onClick:()=>I(1),className:"btn btn-primary mr-1",children:"<<"}),(0,n.jsx)("button",{onClick:()=>I(u-1),className:"btn btn-primary mr-1",children:"<"}),(0,n.jsxs)("span",{className:"btn btn-disabled mr-1",children:["P\xe1gina ",u," de ",x]}),(0,n.jsx)("button",{onClick:()=>I(u+1),className:"btn btn-primary mr-1",children:">"}),(0,n.jsx)("button",{onClick:()=>I(x),className:"btn btn-primary",children:">>"})]}),(0,n.jsxs)("table",{className:"table-auto w-full",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"Username"}),(0,n.jsx)("th",{children:"Email"}),(0,n.jsx)("th",{children:"Created_at"}),(0,n.jsx)("th",{children:"Updated_at"}),(0,n.jsx)("th",{children:"isAdmin"}),(0,n.jsx)("th",{children:"Acciones"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:e.username}),(0,n.jsx)("td",{children:e.email}),(0,n.jsx)("td",{children:e.created_at}),(0,n.jsx)("td",{children:e.updated_at}),(0,n.jsx)("td",{children:e.isAdmin?"Yes":"No"}),(0,n.jsxs)("td",{children:[(0,n.jsx)("button",{className:"btn btn-primary mr-2",onClick:()=>A(e),children:"Edit"}),(0,n.jsx)("button",{className:"btn btn-danger",onClick:()=>P(e.id),children:"Eliminar"})]})]},e.id))})]}),s&&(0,n.jsx)("div",{className:"modal-overlay",onClick:R,children:(0,n.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{className:"modal-close-button",onClick:R,children:"\xd7"}),(0,n.jsx)("h2",{children:r?"Edit User":"Create User"}),(0,n.jsx)("input",{type:"text",placeholder:"Username",value:r&&o?o.username:b.username,onChange:e=>{r&&o?c({...o,username:e.target.value}):f({...b,username:e.target.value})},className:"input input-bordered w-full mb-2"}),(0,n.jsx)("input",{type:"email",placeholder:"Email",value:r&&o?o.email:b.email,onChange:e=>{r&&o?c({...o,email:e.target.value}):f({...b,email:e.target.value})},className:"input input-bordered w-full mb-2"}),(0,n.jsx)("input",{type:"password",placeholder:"Password",value:b.password,onChange:e=>f({...b,password:e.target.value}),className:"input input-bordered w-full mb-2"}),(0,n.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,n.jsx)("input",{type:"checkbox",checked:r&&o?o.isAdmin:b.isAdmin,onChange:e=>{r&&o?c({...o,isAdmin:e.target.checked}):f({...b,isAdmin:e.target.checked})}}),"Es Admin"]}),(0,n.jsx)("button",{onClick:r?()=>z(o):T,className:"btn btn-primary",children:r?"Update User":"Create User"})]})}),v&&(0,n.jsx)(S,{message:v,type:N,onClose:()=>y(null)})]})},P=()=>{let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!1),[r,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(1),[h]=(0,a.useState)(10),[x,g]=(0,a.useState)(1),[j,p]=(0,a.useState)(""),[b,f]=(0,a.useState)(null),[v,y]=(0,a.useState)({validado:!1,ganador:!1});(0,a.useEffect)(()=>{N()},[]),(0,a.useEffect)(()=>{C()},[b,u]);let N=async()=>{try{let e=await d();f(e||"https://lot.uaenorth.cloudapp.azure.com")}catch(e){console.error("Error detecting host:",e),f("https://lot.uaenorth.cloudapp.azure.com")}},C=async()=>{if(!b)return;let e=new URLSearchParams({skip:(u-1)*h,limit:h,...j&&{search:j}}).toString();try{let s=await fetch("".concat(b,"/tickets/?").concat(e)),n=await s.json();t(Array.isArray(n)?n:[]),g(Math.ceil(n.length/h))}catch(e){console.error("Error fetching tickets:",e),t([]),g(1)}},S=e=>{c(e),i(!0)},w=e=>{c(e),y({validado:e.validado,ganador:e.ganador}),l(!0)},k=()=>{i(!1),c(null)},E=()=>{l(!1),c(null)},_=e=>{e<1?m(1):e>x?m(x):m(e),C()},P=e=>{let{name:t,checked:s}=e.target;y(e=>({...e,[t]:s}))},T=async e=>{if(e.preventDefault(),b&&o)try{(await fetch("".concat(b,"/tickets/").concat(o.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})).ok?(C(),E()):console.error("Error updating ticket")}catch(e){console.error("Error updating ticket:",e)}};return(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h2",{children:"Control de Tickets"}),(0,n.jsx)("input",{type:"text",placeholder:"Buscar...",value:j,onChange:e=>{p(e.target.value)},className:"input input-bordered mb-4"}),(0,n.jsxs)("div",{className:"pagination mb-4 flex justify-center",children:[(0,n.jsx)("button",{onClick:()=>_(1),className:"btn btn-primary mr-1",children:"<<"}),(0,n.jsx)("button",{onClick:()=>_(u-1),className:"btn btn-primary mr-1",children:"<"}),(0,n.jsxs)("span",{className:"btn btn-disabled mr-1",children:["P\xe1gina ",u," de ",x]}),(0,n.jsx)("button",{onClick:()=>_(u+1),className:"btn btn-primary mr-1",children:">"}),(0,n.jsx)("button",{onClick:()=>_(x),className:"btn btn-primary",children:">>"})]}),(0,n.jsxs)("table",{className:"table-auto w-full mb-4",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"N\xfamero Ticket"}),(0,n.jsx)("th",{children:"C\xe9dula"}),(0,n.jsx)("th",{children:"Nombre"}),(0,n.jsx)("th",{children:"Tel\xe9fono"}),(0,n.jsx)("th",{children:"Estado"}),(0,n.jsx)("th",{children:"Municipio"}),(0,n.jsx)("th",{children:"Parroquia"}),(0,n.jsx)("th",{children:"Referido ID"}),(0,n.jsx)("th",{children:"Validado"}),(0,n.jsx)("th",{children:"Ganador"}),(0,n.jsx)("th",{children:"Creado en"}),(0,n.jsx)("th",{children:"Acciones"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:e.numero_ticket}),(0,n.jsx)("td",{children:e.cedula}),(0,n.jsx)("td",{children:e.nombre}),(0,n.jsx)("td",{children:e.telefono}),(0,n.jsx)("td",{children:e.estado}),(0,n.jsx)("td",{children:e.municipio}),(0,n.jsx)("td",{children:e.parroquia}),(0,n.jsx)("td",{children:e.referido_id}),(0,n.jsx)("td",{children:e.validado?"S\xed":"No"}),(0,n.jsx)("td",{children:e.ganador?"S\xed":"No"}),(0,n.jsx)("td",{children:new Date(e.created_at).toLocaleDateString()}),(0,n.jsxs)("td",{children:[(0,n.jsx)("button",{className:"btn btn-primary mr-2",onClick:()=>S(e),children:"Ver Detalles"}),(0,n.jsx)("button",{className:"btn btn-secondary",onClick:()=>w(e),children:"Editar"})]})]},e.id))})]}),s&&o&&(0,n.jsx)("div",{className:"modal-overlay",onClick:k,children:(0,n.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{className:"modal-close-button",onClick:k,children:"\xd7"}),(0,n.jsx)("h2",{children:"Detalles del Ticket"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"ID:"})," ",o.id]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"N\xfamero Ticket:"})," ",o.numero_ticket]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"C\xe9dula:"})," ",o.cedula]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Nombre:"})," ",o.nombre]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Tel\xe9fono:"})," ",o.telefono]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Estado:"})," ",o.estado]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Municipio:"})," ",o.municipio]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Parroquia:"})," ",o.parroquia]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Referido ID:"})," ",o.referido_id]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Validado:"})," ",o.validado?"S\xed":"No"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Ganador:"})," ",o.ganador?"S\xed":"No"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Creado en:"})," ",new Date(o.created_at).toLocaleDateString()]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:(0,n.jsx)("strong",{children:"QR Code:"})}),(0,n.jsx)("img",{src:"data:image/png;base64,".concat(o.qr_ticket),alt:"QR Code"})]})]})]})}),r&&o&&(0,n.jsx)("div",{className:"modal-overlay",onClick:E,children:(0,n.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{className:"modal-close-button",onClick:E,children:"\xd7"}),(0,n.jsx)("h2",{children:"Editar Ticket"}),(0,n.jsxs)("form",{onSubmit:T,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Validado"}),(0,n.jsx)("input",{type:"checkbox",name:"validado",checked:v.validado,onChange:P,className:"form-checkbox"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Ganador"}),(0,n.jsx)("input",{type:"checkbox",name:"ganador",checked:v.ganador,onChange:P,className:"form-checkbox"})]}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary mt-4",children:"Guardar Cambios"})]})]})})]})},T=()=>{let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!1),[r,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(1),[m]=(0,a.useState)(10),[h,x]=(0,a.useState)(1),[g,j]=(0,a.useState)(""),[p,b]=(0,a.useState)({nombre:"",cedula:"",telefono:"",es_referido:!1}),[f,v]=(0,a.useState)(null),[y,N]=(0,a.useState)("info"),[C,w]=(0,a.useState)(!1),[E,_]=(0,a.useState)(null),[P,T]=(0,a.useState)([]),[z,A]=(0,a.useState)(!1),[R,I]=(0,a.useState)("https://sas.uaenorth.cloudapp.azure.com:8000");(0,a.useEffect)(()=>{O()},[R,d,g]);let O=async()=>{new URLSearchParams({skip:((d-1)*m).toString(),limit:m.toString(),...g&&{search:g}}).toString(),R.replace("http://","https://");try{let e=await fetch("https://lot.uaenorth.cloudapp.azure.com/recolectores");if(!e.ok)throw Error("Error: ".concat(e.statusText));let s=await e.json();t(Array.isArray(s)?s:[]),x(Math.ceil(s.length/m))}catch(e){console.error("Error fetching recolectores:",e),t([]),x(1)}},L=async()=>{R&&E&&(await fetch("".concat(R,"/recolectores/").concat(E),{method:"DELETE"}),_(null),w(!1),O(),v("Recolector eliminado exitosamente"),N("success"))},D=async()=>{R&&(await fetch("".concat(R,"/recolectores"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),b({nombre:"",cedula:"",telefono:"",es_referido:!1}),O(),J(),v("Recolector creado exitosamente"),N("success"))},U=async e=>{R&&(await fetch("".concat(R,"/recolectores/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),O(),J(),v("Recolector actualizado exitosamente"),N("success"))},q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;c(e),l(!!e),i(!0)},J=()=>{i(!1),c(null)},M=e=>{e<1?u(1):e>h?u(h):u(e),O()},G=async e=>{let t="".concat(R,"/recolectores/estadisticas/");e&&(t+="?recolector_id=".concat(e));try{let e=await fetch(t),s=await e.json();T(s),A(!0)}catch(e){console.error("Error fetching estad\xedsticas:",e),v("Error obteniendo estad\xedsticas"),N("error")}},B=()=>{A(!1),T([])};return(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h2",{children:"Control de Recolectores"}),(0,n.jsx)("button",{onClick:()=>q(),className:"btn btn-primary mb-4",children:"Crear Nuevo Recolector"}),(0,n.jsx)("button",{onClick:()=>G(),className:"btn btn-secondary mb-4 ml-2",children:"Ver Estad\xedsticas Generales"}),(0,n.jsx)("input",{type:"text",placeholder:"Buscar...",value:g,onChange:e=>{j(e.target.value)},className:"input input-bordered mb-4"}),(0,n.jsxs)("div",{className:"pagination mb-4 flex justify-center",children:[(0,n.jsx)("button",{onClick:()=>M(1),className:"btn btn-primary mr-1",children:"<<"}),(0,n.jsx)("button",{onClick:()=>M(d-1),className:"btn btn-primary mr-1",children:"<"}),(0,n.jsxs)("span",{className:"btn btn-disabled mr-1",children:["P\xe1gina ",d," de ",h]}),(0,n.jsx)("button",{onClick:()=>M(d+1),className:"btn btn-primary mr-1",children:">"}),(0,n.jsx)("button",{onClick:()=>M(h),className:"btn btn-primary",children:">>"})]}),(0,n.jsxs)("table",{className:"table-auto w-full",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"Nombre"}),(0,n.jsx)("th",{children:"C\xe9dula"}),(0,n.jsx)("th",{children:"Tel\xe9fono"}),(0,n.jsx)("th",{children:"Referido"}),(0,n.jsx)("th",{children:"Acciones"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:e.nombre}),(0,n.jsx)("td",{children:e.cedula}),(0,n.jsx)("td",{children:e.telefono}),(0,n.jsx)("td",{children:e.es_referido?"S\xed":"No"}),(0,n.jsxs)("td",{children:[(0,n.jsx)("button",{className:"btn btn-primary mr-2",onClick:()=>q(e),children:"Editar"}),(0,n.jsx)("button",{className:"btn btn-danger mr-2",onClick:()=>{_(e.id),w(!0)},children:"Eliminar"}),(0,n.jsx)("button",{className:"btn btn-info",onClick:()=>G(e.id),children:"Ver Estad\xedsticas"})]})]},e.id))})]}),s&&(0,n.jsx)("div",{className:"modal-overlay",onClick:J,children:(0,n.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{className:"modal-close-button",onClick:J,children:"\xd7"}),(0,n.jsx)("h2",{children:r?"Editar Recolector":"Crear Recolector"}),(0,n.jsx)("input",{type:"text",placeholder:"Nombre",value:r&&o?o.nombre:p.nombre,onChange:e=>{r&&o?c({...o,nombre:e.target.value}):b({...p,nombre:e.target.value})},className:"input input-bordered w-full mb-2"}),(0,n.jsx)("input",{type:"text",placeholder:"C\xe9dula",value:r&&o?o.cedula:p.cedula,onChange:e=>{r&&o?c({...o,cedula:e.target.value}):b({...p,cedula:e.target.value})},className:"input input-bordered w-full mb-2"}),(0,n.jsx)("input",{type:"text",placeholder:"Tel\xe9fono",value:r&&o?o.telefono:p.telefono,onChange:e=>{r&&o?c({...o,telefono:e.target.value}):b({...p,telefono:e.target.value})},className:"input input-bordered w-full mb-2"}),(0,n.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,n.jsx)("input",{type:"checkbox",checked:r&&o?o.es_referido:p.es_referido,onChange:e=>{r&&o?c({...o,es_referido:e.target.checked}):b({...p,es_referido:e.target.checked})}}),"Es Referido"]}),(0,n.jsx)("button",{onClick:r?()=>U(o):D,className:"btn btn-primary",children:r?"Actualizar Recolector":"Crear Recolector"})]})}),f&&(0,n.jsx)(S,{message:f,type:y,onClose:()=>v(null)}),C&&(0,n.jsx)(k,{message:"\xbfEst\xe1s seguro de que quieres eliminar este recolector?",onConfirm:L,onCancel:()=>w(!1)}),z&&(0,n.jsx)("div",{className:"modal-overlay",onClick:B,children:(0,n.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{className:"modal-close-button",onClick:B,children:"\xd7"}),(0,n.jsx)("h2",{children:"Estad\xedsticas de Recolectores"}),(0,n.jsxs)("table",{className:"table-auto w-full mb-4",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"ID Recolector"}),(0,n.jsx)("th",{children:"Nombre"}),(0,n.jsx)("th",{children:"Cantidad de Tickets"})]})}),(0,n.jsx)("tbody",{children:P.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.recolector_id}),(0,n.jsx)("td",{children:e.nombre}),(0,n.jsx)("td",{children:e.tickets_count})]},e.recolector_id))})]})]})})]})},z=()=>{let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!1),[r,l]=(0,a.useState)(null),[o,c]=(0,a.useState)(1),[d]=(0,a.useState)(10),[u,m]=(0,a.useState)(1),[h,x]=(0,a.useState)(""),[g,j]=(0,a.useState)("https://lot.uaenorth.cloudapp.azure.com"),[p,b]=(0,a.useState)({numero:"",operador:""});(0,a.useEffect)(()=>{f()},[g,o,h]);let f=async()=>{let e=new URLSearchParams({skip:(o-1)*d,limit:d,...h&&{search:h}}).toString();try{let s=await fetch("".concat(g,"/lineas_telefonicas/?").concat(e));if(!s.ok)throw Error("Error: ".concat(s.statusText));let n=await s.json();t(Array.isArray(n)?n:[]),m(Math.ceil(n.length/d))}catch(e){console.error("Error fetching lineas:",e),t([]),m(1)}},v=e=>{l(e),i(!0)},y=()=>{i(!1),l(null)},N=async e=>{await fetch("".concat(g,"/lineas_telefonicas/").concat(e),{method:"DELETE"}),f()},C=async()=>{await fetch("".concat(g,"/lineas_telefonicas"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),b({numero:"",operador:""}),f(),y()},S=async e=>{await fetch("".concat(g,"/lineas_telefonicas/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),f(),y()},w=e=>{e<1?c(1):e>u?c(u):c(e)};return(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h2",{children:"Control de L\xedneas Telef\xf3nicas"}),(0,n.jsx)("button",{onClick:()=>v(null),className:"btn btn-primary mb-4",children:"Crear Nueva L\xednea"}),(0,n.jsx)("input",{type:"text",placeholder:"Buscar...",value:h,onChange:e=>{x(e.target.value),c(1)},className:"input input-bordered mb-4"}),(0,n.jsxs)("div",{className:"pagination mb-4 flex justify-center",children:[(0,n.jsx)("button",{onClick:()=>w(1),className:"btn btn-primary mr-1",children:"<<"}),(0,n.jsx)("button",{onClick:()=>w(o-1),className:"btn btn-primary mr-1",children:"<"}),(0,n.jsxs)("span",{className:"btn btn-disabled mr-1",children:["P\xe1gina ",o," de ",u]}),(0,n.jsx)("button",{onClick:()=>w(o+1),className:"btn btn-primary mr-1",children:">"}),(0,n.jsx)("button",{onClick:()=>w(u),className:"btn btn-primary",children:">>"})]}),(0,n.jsxs)("table",{className:"table-auto w-full mb-4",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"N\xfamero"}),(0,n.jsx)("th",{children:"Operador"}),(0,n.jsx)("th",{children:"Acciones"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:e.numero}),(0,n.jsx)("td",{children:e.operador}),(0,n.jsxs)("td",{children:[(0,n.jsx)("button",{className:"btn btn-primary mr-2",onClick:()=>v(e),children:"Editar"}),(0,n.jsx)("button",{className:"btn btn-danger",onClick:()=>N(e.id),children:"Eliminar"})]})]},e.id))})]}),s&&(0,n.jsx)("div",{className:"modal-overlay",onClick:y,children:(0,n.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{className:"modal-close-button",onClick:y,children:"\xd7"}),(0,n.jsx)("h2",{children:r?"Editar L\xednea":"Crear Nueva L\xednea"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r?S(r):C()},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xfamero"}),(0,n.jsx)("input",{type:"text",name:"numero",value:r?r.numero:p.numero,onChange:e=>{r?l({...r,numero:e.target.value}):b({...p,numero:e.target.value})},className:"input input-bordered w-full mb-2"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Operador"}),(0,n.jsx)("input",{type:"text",name:"operador",value:r?r.operador:p.operador,onChange:e=>{r?l({...r,operador:e.target.value}):b({...p,operador:e.target.value})},className:"input input-bordered w-full mb-2"})]}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary",children:r?"Guardar Cambios":"Crear"})]})]})})]})},A=()=>{let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(1),[r,l]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[x,g]=(0,a.useState)([]),[j,p]=(0,a.useState)([]),[b,f]=(0,a.useState)(null),[v,y]=(0,a.useState)("info"),N="https://lot.uaenorth.cloudapp.azure.com";(0,a.useEffect)(()=>{C()},[]),(0,a.useEffect)(()=>{r?w(r):(p([]),c(""),h(""))},[r]);let C=async()=>{try{let e=await fetch("".concat(N,"/estados")),t=await e.json();g(t)}catch(e){console.error("Error fetching estados:",e),g([{codigo_estado:"",estado:"No hay estados disponibles"}])}},w=async e=>{try{let t=await fetch("".concat(N,"/municipios/").concat(encodeURIComponent(e))),s=await t.json();p(s.length>0?s:[{codigo_municipio:"",municipio:"No hay municipios disponibles"}])}catch(e){console.error("Error fetching municipios:",e),p([{codigo_municipio:"",municipio:"No hay municipios disponibles"}])}},k=async()=>{try{var e,n;let a=(null===(e=x.find(e=>e.codigo_estado.toString()===r.toString()))||void 0===e?void 0:e.estado)||"",i=(null===(n=j.find(e=>e.codigo_municipio.toString()===o.toString()))||void 0===n?void 0:n.municipio)||"",l=JSON.stringify({cantidad_ganadores:s,estado:""!==r&&"Seleccionar Estado"!==r?a:"",municipio:""!==o&&"Seleccionar Municipio"!==o?i:""});console.log("body:",l);let c=await fetch("".concat(N,"/sorteo/ganadores"),{method:"POST",headers:{"Content-Type":"application/json"},body:l});if(!c.ok){let e=await c.json();f(e.message||"Error realizando el sorteo. Por favor, intenta de nuevo."),y("error");return}let d=await c.json();t(Array.isArray(d)?d:[]),f("Sorteo realizado exitosamente"),y("success")}catch(e){console.error("Error realizando el sorteo:",e),t([]),f("Error realizando el sorteo. Por favor, intenta de nuevo."),y("error")}},E=async()=>{try{if(!(await fetch("".concat(N,"/sorteo/quitar_ganadores"),{method:"POST"})).ok)throw Error("Error en la respuesta del servidor");t([]),f("Marca de ganadores eliminada exitosamente"),y("success")}catch(e){console.error("Error quitando la marca de ganadores:",e),f("Error quitando la marca de ganadores. Por favor, intenta de nuevo."),y("error")}};return(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h2",{children:"Control de Sorteo de Ganadores"}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block mb-2",children:"Cantidad de Ganadores"}),(0,n.jsx)("input",{type:"number",value:s,onChange:e=>i(parseInt(e.target.value)),className:"input input-bordered w-full"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block mb-2",children:"Estado"}),(0,n.jsxs)("select",{value:r,onChange:e=>{l(e.target.value);let t=x.find(t=>t.codigo_estado===e.target.value);u(t?t.estado:"")},className:"input input-bordered w-full",children:[(0,n.jsx)("option",{value:"",children:"Seleccionar Estado"}),x.length>0&&"No hay estados disponibles"!==x[0].estado?x.map(e=>(0,n.jsx)("option",{value:e.codigo_estado,children:e.estado},e.codigo_estado)):(0,n.jsx)("option",{value:"",disabled:!0,children:"No hay estados disponibles"})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block mb-2",children:"Municipio"}),(0,n.jsxs)("select",{value:o,onChange:e=>{c(e.target.value);let t=j.find(t=>t.codigo_municipio===e.target.value);h(t?t.municipio:"")},className:"input input-bordered w-full",disabled:0===j.length||"No hay municipios disponibles"===j[0].municipio,children:[(0,n.jsx)("option",{value:"",children:"Seleccionar Municipio"}),j.length>0&&"No hay municipios disponibles"!==j[0].municipio?j.map(e=>(0,n.jsx)("option",{value:e.codigo_municipio,children:e.municipio},e.codigo_municipio)):(0,n.jsx)("option",{value:"",disabled:!0,children:"No hay municipios disponibles"})]})]}),(0,n.jsx)("button",{onClick:k,className:"btn btn-primary mr-2",children:"Realizar Sorteo"}),(0,n.jsx)("button",{onClick:E,className:"btn btn-danger",children:"Quitar Marca de Ganadores"}),b&&(0,n.jsx)(S,{message:b,type:v,onClose:()=>f(null)}),(0,n.jsx)("h3",{className:"mt-4",children:"Ganadores del Sorteo"}),(0,n.jsxs)("table",{className:"table-auto w-full mb-4",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"N\xfamero Ticket"}),(0,n.jsx)("th",{children:"C\xe9dula"}),(0,n.jsx)("th",{children:"Nombre"}),(0,n.jsx)("th",{children:"Tel\xe9fono"}),(0,n.jsx)("th",{children:"Estado"}),(0,n.jsx)("th",{children:"Municipio"})]})}),(0,n.jsx)("tbody",{children:e.length>0?e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:e.numero_ticket}),(0,n.jsx)("td",{children:e.cedula}),(0,n.jsx)("td",{children:e.nombre}),(0,n.jsx)("td",{children:e.telefono}),(0,n.jsx)("td",{children:e.estado}),(0,n.jsx)("td",{children:e.municipio})]},e.id)):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:7,className:"text-center",children:"No hay ganadores disponibles"})})})]})]})},R=s(9881),I=s(4287),O=s.n(I),L=s(3184),D=s.n(L),U=s(1364),q=s.n(U),J=s(6840),M=s.n(J);let G={Inter:O(),Plus_Jakarta_Sans:D(),Open_Sans:q(),PT_Mono:M()};var B=s(5560),F=s.n(B),H=()=>{var e,t,s,i,r,l,o,u,m,h,x,g,j,p,b;let[f,v]=(0,a.useState)(!1),[S,w]=(0,a.useState)("WELCOME"),[k,I]=(0,a.useState)(!1),[O,L]=(0,a.useState)(""),[D,U]=(0,a.useState)("Default"),[q,J]=(0,a.useState)(null),[M,B]=(0,a.useState)(null),[H,V]=(0,a.useState)(!0),Q=q?null===(e=q[D])||void 0===e?void 0:e.Customization.settings.font.value:null,W=Q&&(null===(t=G[Q])||void 0===t?void 0:t.className)||"",[K,Y]=(0,a.useState)(null),$=async e=>{try{let e=await fetch("/api/settings");if(e.ok){let t=await e.json();J(t),U(t.currentTemplate)}else console.error("Failed to fetch settings")}catch(e){console.error("Error fetching settings:",e)}finally{V(!1)}},X=async()=>{try{let e=await d();Y(e),await $(e)}catch(e){console.error("Error detecting host:",e),Y(null),V(!1)}},Z=async()=>{if(K&&q)try{await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedTheme:D,themes:q})})}catch(e){console.error("Failed to update config:",e)}};return((0,a.useEffect)(()=>{X()},[]),(0,a.useEffect)(()=>{Z()},[q,D]),(0,a.useEffect)(()=>{if(q){var e,t,s,n,a,i,r,l,o,c,d;document.documentElement.style.setProperty("--primary-verba",null===(e=q[D])||void 0===e?void 0:e.Customization.settings.primary_color.color),document.documentElement.style.setProperty("--secondary-verba",null===(t=q[D])||void 0===t?void 0:t.Customization.settings.secondary_color.color),document.documentElement.style.setProperty("--warning-verba",null===(s=q[D])||void 0===s?void 0:s.Customization.settings.warning_color.color),document.documentElement.style.setProperty("--bg-verba",null===(n=q[D])||void 0===n?void 0:n.Customization.settings.bg_color.color),document.documentElement.style.setProperty("--bg-alt-verba",null===(a=q[D])||void 0===a?void 0:a.Customization.settings.bg_alt_color.color),document.documentElement.style.setProperty("--text-verba",null===(i=q[D])||void 0===i?void 0:i.Customization.settings.text_color.color),document.documentElement.style.setProperty("--text-alt-verba",null===(r=q[D])||void 0===r?void 0:r.Customization.settings.text_alt_color.color),document.documentElement.style.setProperty("--button-verba",null===(l=q[D])||void 0===l?void 0:l.Customization.settings.button_color.color),document.documentElement.style.setProperty("--button-hover-verba",null===(o=q[D])||void 0===o?void 0:o.Customization.settings.button_hover_color.color),document.documentElement.style.setProperty("--bg-console-verba",null===(c=q[D])||void 0===c?void 0:c.Customization.settings.bg_console.color),document.documentElement.style.setProperty("--text-console-verba",null===(d=q[D])||void 0===d?void 0:d.Customization.settings.text_console.color)}},[q,D]),H)?(0,n.jsxs)("div",{className:"flex items-center justify-center h-screen gap-2",children:[(0,n.jsx)(F(),{loading:!0,size:12,speedMultiplier:.75}),(0,n.jsx)("p",{children:"Cargando Lotto Bueno"})]}):q?(0,n.jsx)("div",{onClick:e=>{e.target,e.currentTarget},children:(0,n.jsxs)("main",{className:f?"min-h-screen p-5 bg-bg-verba text-text-verba ".concat(W):"fixed inset-0 overflow-y-auto bg-white bg-opacity-75 ".concat(W),"data-theme":q?null===(s=q[D])||void 0===s?void 0:s.Customization.settings.theme:"light",children:[""!==O&&(0,n.jsx)(R.GoogleAnalytics,{gaId:O}),(0,n.jsxs)("div",{children:["WELCOME"===S&&(0,n.jsx)(C,{title:null===(i=q[D])||void 0===i?void 0:i.Customization.settings.title.text,subtitle:null===(r=q[D])||void 0===r?void 0:r.Customization.settings.subtitle.text,imageSrc:null===(l=q[D])||void 0===l?void 0:l.Customization.settings.image.src,setCurrentPage:w}),"REGISTER"===S&&(0,n.jsx)(E,{title:null===(o=q[D])||void 0===o?void 0:o.Customization.settings.title.text,subtitle:null===(u=q[D])||void 0===u?void 0:u.Customization.settings.subtitle.text,imageSrc:null===(m=q[D])||void 0===m?void 0:m.Customization.settings.image.src,setCurrentPage:w,onAdminLogin:e=>{"string"==typeof e&&"1234"===e?v(!f):"boolean"==typeof e&&v(e)}}),f&&(0,n.jsx)(c,{APIHost:K,production:k,title:null===(h=q[D])||void 0===h?void 0:h.Customization.settings.title.text,subtitle:null===(x=q[D])||void 0===x?void 0:x.Customization.settings.subtitle.text,imageSrc:null===(g=q[D])||void 0===g?void 0:g.Customization.settings.image.src,version:"v1.0.1",currentPage:S,setCurrentPage:w}),f&&"ELECTORES"===S&&(0,n.jsx)(N,{production:k,settingConfig:q[D],APIHost:K,RAGConfig:M,isAdmin:f,title:null===(j=q[D])||void 0===j?void 0:j.Customization.settings.title.text,subtitle:null===(p=q[D])||void 0===p?void 0:p.Customization.settings.subtitle.text,imageSrc:null===(b=q[D])||void 0===b?void 0:b.Customization.settings.image.src}),f&&"STATUS"===S&&(0,n.jsx)(A,{}),f&&"SETTINGS"===S&&!k&&(0,n.jsx)(y,{settingTemplate:D,setSettingTemplate:U,baseSetting:q,setBaseSetting:J}),f&&"USERS"===S&&!k&&(0,n.jsx)(_,{}),f&&"TICKETS"===S&&!k&&(0,n.jsx)(P,{}),f&&"RECOLECTORES"===S&&!k&&(0,n.jsx)(T,{}),f&&"ADD"===S&&!k&&(0,n.jsx)(z,{})]})]})}):(0,n.jsx)("div",{className:"flex items-center justify-center h-screen gap-2",children:(0,n.jsx)("p",{children:"Error cargando la configuraci\xf3n."})})}}},function(e){e.O(0,[429,582,33,190,82,420,838,971,23,744],function(){return e(e.s=7408)}),_N_E=e.O()}]);